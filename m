Return-Path: <linux-mediatek-bounces+lists+linux-mediatek=lfdr.de@lists.infradead.org>
X-Original-To: lists+linux-mediatek@lfdr.de
Delivered-To: lists+linux-mediatek@lfdr.de
Received: from bombadil.infradead.org (bombadil.infradead.org [IPv6:2607:7c80:54:e::133])
	by mail.lfdr.de (Postfix) with ESMTPS id 88EF612949
	for <lists+linux-mediatek@lfdr.de>; Fri,  3 May 2019 09:57:35 +0200 (CEST)
DKIM-Signature: v=1; a=rsa-sha256; q=dns/txt; c=relaxed/relaxed;
	d=lists.infradead.org; s=bombadil.20170209; h=Sender:
	Content-Transfer-Encoding:Content-Type:Cc:List-Subscribe:List-Help:List-Post:
	List-Archive:List-Unsubscribe:List-Id:MIME-Version:References:In-Reply-To:
	Message-Id:Date:Subject:To:From:Reply-To:Content-ID:Content-Description:
	Resent-Date:Resent-From:Resent-Sender:Resent-To:Resent-Cc:Resent-Message-ID:
	List-Owner; bh=6JlDMJKz48iQCbWFdEs9llQ1wiHxm4uWg35hsg00P4I=; b=JpFrd6gfqI3xvG
	St54ebyDmx+QOZxi/wPdZYzObXOPhJ5pu9wh0DwbfGCzYTNtVjfI74LhKiQjTRE+wfhB/N60+tiYr
	MropH/ZeR9FUCEoRUDli8Pkw9dfh7+UIieT84bIhZLbcSxpn8RabWEeaHer1leriP23PL2wok430B
	+emxPApwf4K32g/dOv730CdjnlBq52LTh7CEuivXuXDM5fwxNH4NfXnvCOT63nVBLg1swOlJSOk44
	Tk09tBxNl1nuFxBxzZJtEegfEeUr/78u6OMIAm6N/zt/509bC8kY494z/nolS7lj/ZSGlQgeViHsk
	UwXEeGDzGdjZM5TF+qFQ==;
Received: from localhost ([127.0.0.1] helo=bombadil.infradead.org)
	by bombadil.infradead.org with esmtp (Exim 4.90_1 #2 (Red Hat Linux))
	id 1hMT4S-0001d3-Rt; Fri, 03 May 2019 07:57:29 +0000
Received: from smtp-out.xnet.cz ([178.217.244.18])
 by bombadil.infradead.org with esmtps (Exim 4.90_1 #2 (Red Hat Linux))
 id 1hMT3p-0000fy-Gq; Fri, 03 May 2019 07:57:09 +0000
Received: from meh.true.cz (meh.true.cz [108.61.167.218])
 (Authenticated sender: petr@true.cz)
 by smtp-out.xnet.cz (Postfix) with ESMTPSA id D67AB3580;
 Fri,  3 May 2019 09:56:46 +0200 (CEST)
Received: by meh.true.cz (OpenSMTPD) with ESMTP id e74a7e0f;
 Fri, 3 May 2019 09:56:44 +0200 (CEST)
From: =?UTF-8?q?Petr=20=C5=A0tetiar?= <ynezz@true.cz>
To: netdev@vger.kernel.org, devicetree@vger.kernel.org,
 Andreas Larsson <andreas@gaisler.com>,
 Maxime Ripard <maxime.ripard@free-electrons.com>,
 Chen-Yu Tsai <wens@csie.org>,
 Vince Bridgers <vbridger@opensource.altera.com>,
 Florian Fainelli <f.fainelli@gmail.com>,
 Sunil Goutham <sgoutham@cavium.com>, Robert Richter <rric@kernel.org>,
 Fugang Duan <fugang.duan@nxp.com>, Madalin Bucur <madalin.bucur@nxp.com>,
 Pantelis Antoniou <pantelis.antoniou@gmail.com>,
 Vitaly Bordug <vbordug@ru.mvista.com>,
 Claudiu Manoil <claudiu.manoil@freescale.com>,
 Li Yang <leoyang.li@nxp.com>, Yisen Zhuang <yisen.zhuang@huawei.com>,
 Salil Mehta <salil.mehta@huawei.com>,
 Sebastian Hesselbarth <sebastian.hesselbarth@gmail.com>,
 Thomas Petazzoni <thomas.petazzoni@free-electrons.com>,
 Mirko Lindner <mlindner@marvell.com>,
 Stephen Hemminger <stephen@networkplumber.org>,
 Felix Fietkau <nbd@openwrt.org>, John Crispin <john@phrozen.org>,
 Sean Wang <sean.wang@mediatek.com>,
 Nelson Chang <nelson.chang@mediatek.com>,
 Matthias Brugger <matthias.bgg@gmail.com>,
 Vladimir Zapolskiy <vz@mleia.com>,
 Sylvain Lemieux <slemieux.tyco@gmail.com>,
 Sergei Shtylyov <sergei.shtylyov@cogentembedded.com>,
 Byungho An <bh74.an@samsung.com>, Girish K S <ks.giri@samsung.com>,
 Vipul Pandya <vipul.pandya@samsung.com>,
 Giuseppe Cavallaro <peppe.cavallaro@st.com>,
 Alexandre Torgue <alexandre.torgue@st.com>,
 Grygorii Strashko <grygorii.strashko@ti.com>,
 Wingman Kwok <w-kwok2@ti.com>, Murali Karicheri <m-karicheri2@ti.com>,
 Michal Simek <michal.simek@xilinx.com>,
 =?UTF-8?q?S=C3=B6ren=20Brinkmann?= <soren.brinkmann@xilinx.com>,
 Anirudha Sarangi <anirudh@xilinx.com>, John Linn <John.Linn@xilinx.com>,
 "David S. Miller" <davem@davemloft.net>
Subject: [PATCH v3 05/10] net: ethernet: support of_get_mac_address new
 ERR_PTR error
Date: Fri,  3 May 2019 09:56:02 +0200
Message-Id: <1556870168-26864-6-git-send-email-ynezz@true.cz>
X-Mailer: git-send-email 1.9.1
In-Reply-To: <1556870168-26864-1-git-send-email-ynezz@true.cz>
References: <1556870168-26864-1-git-send-email-ynezz@true.cz>
MIME-Version: 1.0
X-CRM114-Version: 20100106-BlameMichelson ( TRE 0.8.0 (BSD) ) MR-646709E3 
X-CRM114-CacheID: sfid-20190503_005650_696662_A284EE5C 
X-CRM114-Status: GOOD (  14.68  )
X-Spam-Score: 0.0 (/)
X-Spam-Report: SpamAssassin version 3.4.2 on bombadil.infradead.org summary:
 Content analysis details:   (0.0 points)
 pts rule name              description
 ---- ---------------------- --------------------------------------------------
 -0.0 RCVD_IN_DNSWL_NONE     RBL: Sender listed at https://www.dnswl.org/,
 no trust [178.217.244.18 listed in list.dnswl.org]
X-BeenThere: linux-mediatek@lists.infradead.org
X-Mailman-Version: 2.1.21
Precedence: list
List-Id: <linux-mediatek.lists.infradead.org>
List-Unsubscribe: <http://lists.infradead.org/mailman/options/linux-mediatek>, 
 <mailto:linux-mediatek-request@lists.infradead.org?subject=unsubscribe>
List-Archive: <http://lists.infradead.org/pipermail/linux-mediatek/>
List-Post: <mailto:linux-mediatek@lists.infradead.org>
List-Help: <mailto:linux-mediatek-request@lists.infradead.org?subject=help>
List-Subscribe: <http://lists.infradead.org/mailman/listinfo/linux-mediatek>, 
 <mailto:linux-mediatek-request@lists.infradead.org?subject=subscribe>
Cc: Andrew Lunn <andrew@lunn.ch>, Maxime Ripard <maxime.ripard@bootlin.com>,
 linuxppc-dev@lists.ozlabs.org, linux-mediatek@lists.infradead.org,
 linux-kernel@vger.kernel.org, linux-renesas-soc@vger.kernel.org,
 Srinivas Kandagatla <srinivas.kandagatla@linaro.org>,
 nios2-dev@lists.rocketboards.org,
 =?UTF-8?q?Petr=20=C5=A0tetiar?= <ynezz@true.cz>, linux-omap@vger.kernel.org,
 Frank Rowand <frowand.list@gmail.com>, linux-arm-kernel@lists.infradead.org,
 Heiner Kallweit <hkallweit1@gmail.com>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Sender: "Linux-mediatek" <linux-mediatek-bounces@lists.infradead.org>
Errors-To: linux-mediatek-bounces+lists+linux-mediatek=lfdr.de@lists.infradead.org

VGhlcmUgd2FzIE5WTUVNIHN1cHBvcnQgYWRkZWQgdG8gb2ZfZ2V0X21hY19hZGRyZXNzLCBzbyBp
dCBjb3VsZCBub3cKcmV0dXJuIE5VTEwgYW5kIEVSUl9QVFIgZW5jb2RlZCBlcnJvciB2YWx1ZXMs
IHNvIHdlIG5lZWQgdG8gYWRqdXN0IGFsbApjdXJyZW50IHVzZXJzIG9mIG9mX2dldF9tYWNfYWRk
cmVzcyB0byB0aGlzIG5ldyBmYWN0LgoKV2hpbGUgYXQgaXQsIHJlbW92ZSBzdXBlcmZsdW91cyBp
c192YWxpZF9ldGhlcl9hZGRyIGFzIHRoZSBNQUMgYWRkcmVzcwpyZXR1cm5lZCBmcm9tIG9mX2dl
dF9tYWNfYWRkcmVzcyBpcyBhbHdheXMgdmFsaWQgYW5kIGNoZWNrZWQgYnkKaXNfdmFsaWRfZXRo
ZXJfYWRkciBhbnl3YXkuCgpTaWduZWQtb2ZmLWJ5OiBQZXRyIMWgdGV0aWFyIDx5bmV6ekB0cnVl
LmN6PgotLS0KIGRyaXZlcnMvbmV0L2V0aGVybmV0L2Flcm9mbGV4L2dyZXRoLmMgICAgICAgICAg
ICAgICAgIHwgMiArLQogZHJpdmVycy9uZXQvZXRoZXJuZXQvYWxsd2lubmVyL3N1bjRpLWVtYWMu
YyAgICAgICAgICAgfCAyICstCiBkcml2ZXJzL25ldC9ldGhlcm5ldC9hbHRlcmEvYWx0ZXJhX3Rz
ZV9tYWluLmMgICAgICAgICB8IDIgKy0KIGRyaXZlcnMvbmV0L2V0aGVybmV0L2FyYy9lbWFjX21h
aW4uYyAgICAgICAgICAgICAgICAgIHwgMiArLQogZHJpdmVycy9uZXQvZXRoZXJuZXQvYXVyb3Jh
L25iODgwMC5jICAgICAgICAgICAgICAgICAgfCAyICstCiBkcml2ZXJzL25ldC9ldGhlcm5ldC9i
cm9hZGNvbS9iY21zeXNwb3J0LmMgICAgICAgICAgICB8IDIgKy0KIGRyaXZlcnMvbmV0L2V0aGVy
bmV0L2Jyb2FkY29tL2JnbWFjLWJjbWEuYyAgICAgICAgICAgIHwgMiArLQogZHJpdmVycy9uZXQv
ZXRoZXJuZXQvYnJvYWRjb20vYmdtYWMtcGxhdGZvcm0uYyAgICAgICAgfCAyICstCiBkcml2ZXJz
L25ldC9ldGhlcm5ldC9icm9hZGNvbS9nZW5ldC9iY21nZW5ldC5jICAgICAgICB8IDIgKy0KIGRy
aXZlcnMvbmV0L2V0aGVybmV0L2Nhdml1bS9vY3Rlb24vb2N0ZW9uX21nbXQuYyAgICAgIHwgMiAr
LQogZHJpdmVycy9uZXQvZXRoZXJuZXQvY2F2aXVtL3RodW5kZXIvdGh1bmRlcl9iZ3guYyAgICAg
fCAyICstCiBkcml2ZXJzL25ldC9ldGhlcm5ldC9kYXZpY29tL2RtOTAwMC5jICAgICAgICAgICAg
ICAgICB8IDIgKy0KIGRyaXZlcnMvbmV0L2V0aGVybmV0L2V0aG9jLmMgICAgICAgICAgICAgICAg
ICAgICAgICAgIHwgMiArLQogZHJpdmVycy9uZXQvZXRoZXJuZXQvZXpjaGlwL25wc19lbmV0LmMg
ICAgICAgICAgICAgICAgfCAyICstCiBkcml2ZXJzL25ldC9ldGhlcm5ldC9mcmVlc2NhbGUvZmVj
X21haW4uYyAgICAgICAgICAgICB8IDIgKy0KIGRyaXZlcnMvbmV0L2V0aGVybmV0L2ZyZWVzY2Fs
ZS9mZWNfbXBjNTJ4eC5jICAgICAgICAgIHwgMiArLQogZHJpdmVycy9uZXQvZXRoZXJuZXQvZnJl
ZXNjYWxlL2ZtYW4vbWFjLmMgICAgICAgICAgICAgfCAyICstCiBkcml2ZXJzL25ldC9ldGhlcm5l
dC9mcmVlc2NhbGUvZnNfZW5ldC9mc19lbmV0LW1haW4uYyB8IDIgKy0KIGRyaXZlcnMvbmV0L2V0
aGVybmV0L2ZyZWVzY2FsZS9naWFuZmFyLmMgICAgICAgICAgICAgIHwgMiArLQogZHJpdmVycy9u
ZXQvZXRoZXJuZXQvZnJlZXNjYWxlL3VjY19nZXRoLmMgICAgICAgICAgICAgfCAyICstCiBkcml2
ZXJzL25ldC9ldGhlcm5ldC9oaXNpbGljb24vaGlzaV9mZW1hYy5jICAgICAgICAgICB8IDIgKy0K
IGRyaXZlcnMvbmV0L2V0aGVybmV0L2hpc2lsaWNvbi9oaXg1aGQyX2dtYWMuYyAgICAgICAgIHwg
MiArLQogZHJpdmVycy9uZXQvZXRoZXJuZXQvbGFudGlxX3hyeDIwMC5jICAgICAgICAgICAgICAg
ICAgfCAyICstCiBkcml2ZXJzL25ldC9ldGhlcm5ldC9tYXJ2ZWxsL212NjQzeHhfZXRoLmMgICAg
ICAgICAgICB8IDIgKy0KIGRyaXZlcnMvbmV0L2V0aGVybmV0L21hcnZlbGwvbXZuZXRhLmMgICAg
ICAgICAgICAgICAgIHwgMiArLQogZHJpdmVycy9uZXQvZXRoZXJuZXQvbWFydmVsbC9weGExNjhf
ZXRoLmMgICAgICAgICAgICAgfCAyICstCiBkcml2ZXJzL25ldC9ldGhlcm5ldC9tYXJ2ZWxsL3Nr
eTIuYyAgICAgICAgICAgICAgICAgICB8IDIgKy0KIGRyaXZlcnMvbmV0L2V0aGVybmV0L21lZGlh
dGVrL210a19ldGhfc29jLmMgICAgICAgICAgIHwgMiArLQogZHJpdmVycy9uZXQvZXRoZXJuZXQv
bWljcmVsL2tzODg1MS5jICAgICAgICAgICAgICAgICAgfCAyICstCiBkcml2ZXJzL25ldC9ldGhl
cm5ldC9taWNyZWwva3M4ODUxX21sbC5jICAgICAgICAgICAgICB8IDIgKy0KIGRyaXZlcnMvbmV0
L2V0aGVybmV0L21pY3JvY2hpcC9lbmMyOGo2MC5jICAgICAgICAgICAgIHwgMiArLQogZHJpdmVy
cy9uZXQvZXRoZXJuZXQvbnhwL2xwY19ldGguYyAgICAgICAgICAgICAgICAgICAgfCAyICstCiBk
cml2ZXJzL25ldC9ldGhlcm5ldC9xdWFsY29tbS9xY2Ffc3BpLmMgICAgICAgICAgICAgICB8IDIg
Ky0KIGRyaXZlcnMvbmV0L2V0aGVybmV0L3F1YWxjb21tL3FjYV91YXJ0LmMgICAgICAgICAgICAg
IHwgMiArLQogZHJpdmVycy9uZXQvZXRoZXJuZXQvcmVuZXNhcy9yYXZiX21haW4uYyAgICAgICAg
ICAgICAgfCAyICstCiBkcml2ZXJzL25ldC9ldGhlcm5ldC9yZW5lc2FzL3NoX2V0aC5jICAgICAg
ICAgICAgICAgICB8IDIgKy0KIGRyaXZlcnMvbmV0L2V0aGVybmV0L3NhbXN1bmcvc3hnYmUvc3hn
YmVfcGxhdGZvcm0uYyAgIHwgMiArLQogZHJpdmVycy9uZXQvZXRoZXJuZXQvc29jaW9uZXh0L3Nu
aV9hdmUuYyAgICAgICAgICAgICAgfCAyICstCiBkcml2ZXJzL25ldC9ldGhlcm5ldC9zdG1pY3Jv
L3N0bW1hYy9zdG1tYWNfbWFpbi5jICAgICB8IDIgKy0KIGRyaXZlcnMvbmV0L2V0aGVybmV0L3Rp
L2Nwc3cuYyAgICAgICAgICAgICAgICAgICAgICAgIHwgMiArLQogZHJpdmVycy9uZXQvZXRoZXJu
ZXQvdGkvbmV0Y3BfY29yZS5jICAgICAgICAgICAgICAgICAgfCAyICstCiBkcml2ZXJzL25ldC9l
dGhlcm5ldC93aXpuZXQvdzUxMDAuYyAgICAgICAgICAgICAgICAgICB8IDIgKy0KIGRyaXZlcnMv
bmV0L2V0aGVybmV0L3hpbGlueC9sbF90ZW1hY19tYWluLmMgICAgICAgICAgIHwgMiArLQogZHJp
dmVycy9uZXQvZXRoZXJuZXQveGlsaW54L3hpbGlueF9heGllbmV0X21haW4uYyAgICAgfCAyICst
CiBkcml2ZXJzL25ldC9ldGhlcm5ldC94aWxpbngveGlsaW54X2VtYWNsaXRlLmMgICAgICAgICB8
IDIgKy0KIG5ldC9ldGhlcm5ldC9ldGguYyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgIHwgMiArLQogNDYgZmlsZXMgY2hhbmdlZCwgNDYgaW5zZXJ0aW9ucygrKSwgNDYgZGVsZXRp
b25zKC0pCgpkaWZmIC0tZ2l0IGEvZHJpdmVycy9uZXQvZXRoZXJuZXQvYWVyb2ZsZXgvZ3JldGgu
YyBiL2RyaXZlcnMvbmV0L2V0aGVybmV0L2Flcm9mbGV4L2dyZXRoLmMKaW5kZXggNDdlNTk4NC4u
Y2U0ZDJhNSAxMDA2NDQKLS0tIGEvZHJpdmVycy9uZXQvZXRoZXJuZXQvYWVyb2ZsZXgvZ3JldGgu
YworKysgYi9kcml2ZXJzL25ldC9ldGhlcm5ldC9hZXJvZmxleC9ncmV0aC5jCkBAIC0xNDU5LDcg
KzE0NTksNyBAQCBzdGF0aWMgaW50IGdyZXRoX29mX3Byb2JlKHN0cnVjdCBwbGF0Zm9ybV9kZXZp
Y2UgKm9mZGV2KQogCQljb25zdCB1OCAqYWRkcjsKIAogCQlhZGRyID0gb2ZfZ2V0X21hY19hZGRy
ZXNzKG9mZGV2LT5kZXYub2Zfbm9kZSk7Ci0JCWlmIChhZGRyKSB7CisJCWlmICghSVNfRVJSX09S
X05VTEwoYWRkcikpIHsKIAkJCWZvciAoaSA9IDA7IGkgPCA2OyBpKyspCiAJCQkJbWFjYWRkcltp
XSA9ICh1bnNpZ25lZCBpbnQpIGFkZHJbaV07CiAJCX0gZWxzZSB7CmRpZmYgLS1naXQgYS9kcml2
ZXJzL25ldC9ldGhlcm5ldC9hbGx3aW5uZXIvc3VuNGktZW1hYy5jIGIvZHJpdmVycy9uZXQvZXRo
ZXJuZXQvYWxsd2lubmVyL3N1bjRpLWVtYWMuYwppbmRleCBlMWFjYWZhLi45NzA4MTk5IDEwMDY0
NAotLS0gYS9kcml2ZXJzL25ldC9ldGhlcm5ldC9hbGx3aW5uZXIvc3VuNGktZW1hYy5jCisrKyBi
L2RyaXZlcnMvbmV0L2V0aGVybmV0L2FsbHdpbm5lci9zdW40aS1lbWFjLmMKQEAgLTg3MCw3ICs4
NzAsNyBAQCBzdGF0aWMgaW50IGVtYWNfcHJvYmUoc3RydWN0IHBsYXRmb3JtX2RldmljZSAqcGRl
dikKIAogCS8qIFJlYWQgTUFDLWFkZHJlc3MgZnJvbSBEVCAqLwogCW1hY19hZGRyID0gb2ZfZ2V0
X21hY19hZGRyZXNzKG5wKTsKLQlpZiAobWFjX2FkZHIpCisJaWYgKCFJU19FUlJfT1JfTlVMTCht
YWNfYWRkcikpCiAJCW1lbWNweShuZGV2LT5kZXZfYWRkciwgbWFjX2FkZHIsIEVUSF9BTEVOKTsK
IAogCS8qIENoZWNrIGlmIHRoZSBNQUMgYWRkcmVzcyBpcyB2YWxpZCwgaWYgbm90IGdldCBhIHJh
bmRvbSBvbmUgKi8KZGlmZiAtLWdpdCBhL2RyaXZlcnMvbmV0L2V0aGVybmV0L2FsdGVyYS9hbHRl
cmFfdHNlX21haW4uYyBiL2RyaXZlcnMvbmV0L2V0aGVybmV0L2FsdGVyYS9hbHRlcmFfdHNlX21h
aW4uYwppbmRleCBhYTFkMWY1Li45OWE1MTQ5IDEwMDY0NAotLS0gYS9kcml2ZXJzL25ldC9ldGhl
cm5ldC9hbHRlcmEvYWx0ZXJhX3RzZV9tYWluLmMKKysrIGIvZHJpdmVycy9uZXQvZXRoZXJuZXQv
YWx0ZXJhL2FsdGVyYV90c2VfbWFpbi5jCkBAIC0xNTM3LDcgKzE1MzcsNyBAQCBzdGF0aWMgaW50
IGFsdGVyYV90c2VfcHJvYmUoc3RydWN0IHBsYXRmb3JtX2RldmljZSAqcGRldikKIAogCS8qIGdl
dCBkZWZhdWx0IE1BQyBhZGRyZXNzIGZyb20gZGV2aWNlIHRyZWUgKi8KIAltYWNhZGRyID0gb2Zf
Z2V0X21hY19hZGRyZXNzKHBkZXYtPmRldi5vZl9ub2RlKTsKLQlpZiAobWFjYWRkcikKKwlpZiAo
IUlTX0VSUl9PUl9OVUxMKG1hY2FkZHIpKQogCQlldGhlcl9hZGRyX2NvcHkobmRldi0+ZGV2X2Fk
ZHIsIG1hY2FkZHIpOwogCWVsc2UKIAkJZXRoX2h3X2FkZHJfcmFuZG9tKG5kZXYpOwpkaWZmIC0t
Z2l0IGEvZHJpdmVycy9uZXQvZXRoZXJuZXQvYXJjL2VtYWNfbWFpbi5jIGIvZHJpdmVycy9uZXQv
ZXRoZXJuZXQvYXJjL2VtYWNfbWFpbi5jCmluZGV4IGZmM2Q2ODUuLmI0YmY4MDMgMTAwNjQ0Ci0t
LSBhL2RyaXZlcnMvbmV0L2V0aGVybmV0L2FyYy9lbWFjX21haW4uYworKysgYi9kcml2ZXJzL25l
dC9ldGhlcm5ldC9hcmMvZW1hY19tYWluLmMKQEAgLTk2MCw3ICs5NjAsNyBAQCBpbnQgYXJjX2Vt
YWNfcHJvYmUoc3RydWN0IG5ldF9kZXZpY2UgKm5kZXYsIGludCBpbnRlcmZhY2UpCiAJLyogR2V0
IE1BQyBhZGRyZXNzIGZyb20gZGV2aWNlIHRyZWUgKi8KIAltYWNfYWRkciA9IG9mX2dldF9tYWNf
YWRkcmVzcyhkZXYtPm9mX25vZGUpOwogCi0JaWYgKG1hY19hZGRyKQorCWlmICghSVNfRVJSX09S
X05VTEwobWFjX2FkZHIpKQogCQltZW1jcHkobmRldi0+ZGV2X2FkZHIsIG1hY19hZGRyLCBFVEhf
QUxFTik7CiAJZWxzZQogCQlldGhfaHdfYWRkcl9yYW5kb20obmRldik7CmRpZmYgLS1naXQgYS9k
cml2ZXJzL25ldC9ldGhlcm5ldC9hdXJvcmEvbmI4ODAwLmMgYi9kcml2ZXJzL25ldC9ldGhlcm5l
dC9hdXJvcmEvbmI4ODAwLmMKaW5kZXggNmY1NjI3Ni4uMzBhZjg2NSAxMDA2NDQKLS0tIGEvZHJp
dmVycy9uZXQvZXRoZXJuZXQvYXVyb3JhL25iODgwMC5jCisrKyBiL2RyaXZlcnMvbmV0L2V0aGVy
bmV0L2F1cm9yYS9uYjg4MDAuYwpAQCAtMTQ2MSw3ICsxNDYxLDcgQEAgc3RhdGljIGludCBuYjg4
MDBfcHJvYmUoc3RydWN0IHBsYXRmb3JtX2RldmljZSAqcGRldikKIAlkZXYtPmlycSA9IGlycTsK
IAogCW1hYyA9IG9mX2dldF9tYWNfYWRkcmVzcyhwZGV2LT5kZXYub2Zfbm9kZSk7Ci0JaWYgKG1h
YykKKwlpZiAoIUlTX0VSUl9PUl9OVUxMKG1hYykpCiAJCWV0aGVyX2FkZHJfY29weShkZXYtPmRl
dl9hZGRyLCBtYWMpOwogCiAJaWYgKCFpc192YWxpZF9ldGhlcl9hZGRyKGRldi0+ZGV2X2FkZHIp
KQpkaWZmIC0tZ2l0IGEvZHJpdmVycy9uZXQvZXRoZXJuZXQvYnJvYWRjb20vYmNtc3lzcG9ydC5j
IGIvZHJpdmVycy9uZXQvZXRoZXJuZXQvYnJvYWRjb20vYmNtc3lzcG9ydC5jCmluZGV4IGJjM2Fj
MzYuLmMwYThjM2MgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvbmV0L2V0aGVybmV0L2Jyb2FkY29tL2Jj
bXN5c3BvcnQuYworKysgYi9kcml2ZXJzL25ldC9ldGhlcm5ldC9icm9hZGNvbS9iY21zeXNwb3J0
LmMKQEAgLTI1NDgsNyArMjU0OCw3IEBAIHN0YXRpYyBpbnQgYmNtX3N5c3BvcnRfcHJvYmUoc3Ry
dWN0IHBsYXRmb3JtX2RldmljZSAqcGRldikKIAogCS8qIEluaXRpYWxpemUgbmV0ZGV2aWNlIG1l
bWJlcnMgKi8KIAltYWNhZGRyID0gb2ZfZ2V0X21hY19hZGRyZXNzKGRuKTsKLQlpZiAoIW1hY2Fk
ZHIgfHwgIWlzX3ZhbGlkX2V0aGVyX2FkZHIobWFjYWRkcikpIHsKKwlpZiAoSVNfRVJSX09SX05V
TEwobWFjYWRkcikpIHsKIAkJZGV2X3dhcm4oJnBkZXYtPmRldiwgInVzaW5nIHJhbmRvbSBFdGhl
cm5ldCBNQUNcbiIpOwogCQlldGhfaHdfYWRkcl9yYW5kb20oZGV2KTsKIAl9IGVsc2UgewpkaWZm
IC0tZ2l0IGEvZHJpdmVycy9uZXQvZXRoZXJuZXQvYnJvYWRjb20vYmdtYWMtYmNtYS5jIGIvZHJp
dmVycy9uZXQvZXRoZXJuZXQvYnJvYWRjb20vYmdtYWMtYmNtYS5jCmluZGV4IDZmZTA3NGMuLjM0
ZDE4MzAgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvbmV0L2V0aGVybmV0L2Jyb2FkY29tL2JnbWFjLWJj
bWEuYworKysgYi9kcml2ZXJzL25ldC9ldGhlcm5ldC9icm9hZGNvbS9iZ21hYy1iY21hLmMKQEAg
LTEzMiw3ICsxMzIsNyBAQCBzdGF0aWMgaW50IGJnbWFjX3Byb2JlKHN0cnVjdCBiY21hX2Rldmlj
ZSAqY29yZSkKIAkJbWFjID0gb2ZfZ2V0X21hY19hZGRyZXNzKGJnbWFjLT5kZXYtPm9mX25vZGUp
OwogCiAJLyogSWYgbm8gTUFDIGFkZHJlc3MgYXNzaWduZWQgdmlhIGRldmljZSB0cmVlLCBjaGVj
ayBTUFJPTSAqLwotCWlmICghbWFjKSB7CisJaWYgKElTX0VSUl9PUl9OVUxMKG1hYykpIHsKIAkJ
c3dpdGNoIChjb3JlLT5jb3JlX3VuaXQpIHsKIAkJY2FzZSAwOgogCQkJbWFjID0gc3Byb20tPmV0
MG1hYzsKZGlmZiAtLWdpdCBhL2RyaXZlcnMvbmV0L2V0aGVybmV0L2Jyb2FkY29tL2JnbWFjLXBs
YXRmb3JtLmMgYi9kcml2ZXJzL25ldC9ldGhlcm5ldC9icm9hZGNvbS9iZ21hYy1wbGF0Zm9ybS5j
CmluZGV4IDg5NGVkYTUuLjJjZDczODcgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvbmV0L2V0aGVybmV0
L2Jyb2FkY29tL2JnbWFjLXBsYXRmb3JtLmMKKysrIGIvZHJpdmVycy9uZXQvZXRoZXJuZXQvYnJv
YWRjb20vYmdtYWMtcGxhdGZvcm0uYwpAQCAtMTkzLDcgKzE5Myw3IEBAIHN0YXRpYyBpbnQgYmdt
YWNfcHJvYmUoc3RydWN0IHBsYXRmb3JtX2RldmljZSAqcGRldikKIAliZ21hYy0+ZG1hX2RldiA9
ICZwZGV2LT5kZXY7CiAKIAltYWNfYWRkciA9IG9mX2dldF9tYWNfYWRkcmVzcyhucCk7Ci0JaWYg
KG1hY19hZGRyKQorCWlmICghSVNfRVJSX09SX05VTEwobWFjX2FkZHIpKQogCQlldGhlcl9hZGRy
X2NvcHkoYmdtYWMtPm5ldF9kZXYtPmRldl9hZGRyLCBtYWNfYWRkcik7CiAJZWxzZQogCQlkZXZf
d2FybigmcGRldi0+ZGV2LCAiTUFDIGFkZHJlc3Mgbm90IHByZXNlbnQgaW4gZGV2aWNlIHRyZWVc
biIpOwpkaWZmIC0tZ2l0IGEvZHJpdmVycy9uZXQvZXRoZXJuZXQvYnJvYWRjb20vZ2VuZXQvYmNt
Z2VuZXQuYyBiL2RyaXZlcnMvbmV0L2V0aGVybmV0L2Jyb2FkY29tL2dlbmV0L2JjbWdlbmV0LmMK
aW5kZXggOTgzMjQ1Yy4uOGY0NWM2YiAxMDA2NDQKLS0tIGEvZHJpdmVycy9uZXQvZXRoZXJuZXQv
YnJvYWRjb20vZ2VuZXQvYmNtZ2VuZXQuYworKysgYi9kcml2ZXJzL25ldC9ldGhlcm5ldC9icm9h
ZGNvbS9nZW5ldC9iY21nZW5ldC5jCkBAIC0zNDc2LDcgKzM0NzYsNyBAQCBzdGF0aWMgaW50IGJj
bWdlbmV0X3Byb2JlKHN0cnVjdCBwbGF0Zm9ybV9kZXZpY2UgKnBkZXYpCiAKIAlpZiAoZG4pIHsK
IAkJbWFjYWRkciA9IG9mX2dldF9tYWNfYWRkcmVzcyhkbik7Ci0JCWlmICghbWFjYWRkcikgewor
CQlpZiAoSVNfRVJSX09SX05VTEwobWFjYWRkcikpIHsKIAkJCWRldl9lcnIoJnBkZXYtPmRldiwg
ImNhbid0IGZpbmQgTUFDIGFkZHJlc3NcbiIpOwogCQkJZXJyID0gLUVJTlZBTDsKIAkJCWdvdG8g
ZXJyOwpkaWZmIC0tZ2l0IGEvZHJpdmVycy9uZXQvZXRoZXJuZXQvY2F2aXVtL29jdGVvbi9vY3Rl
b25fbWdtdC5jIGIvZHJpdmVycy9uZXQvZXRoZXJuZXQvY2F2aXVtL29jdGVvbi9vY3Rlb25fbWdt
dC5jCmluZGV4IDUzNTljMTAuLjViYzJkNjEgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvbmV0L2V0aGVy
bmV0L2Nhdml1bS9vY3Rlb24vb2N0ZW9uX21nbXQuYworKysgYi9kcml2ZXJzL25ldC9ldGhlcm5l
dC9jYXZpdW0vb2N0ZW9uL29jdGVvbl9tZ210LmMKQEAgLTE1MDMsNyArMTUwMyw3IEBAIHN0YXRp
YyBpbnQgb2N0ZW9uX21nbXRfcHJvYmUoc3RydWN0IHBsYXRmb3JtX2RldmljZSAqcGRldikKIAog
CW1hYyA9IG9mX2dldF9tYWNfYWRkcmVzcyhwZGV2LT5kZXYub2Zfbm9kZSk7CiAKLQlpZiAobWFj
KQorCWlmICghSVNfRVJSX09SX05VTEwobWFjKSkKIAkJbWVtY3B5KG5ldGRldi0+ZGV2X2FkZHIs
IG1hYywgRVRIX0FMRU4pOwogCWVsc2UKIAkJZXRoX2h3X2FkZHJfcmFuZG9tKG5ldGRldik7CmRp
ZmYgLS1naXQgYS9kcml2ZXJzL25ldC9ldGhlcm5ldC9jYXZpdW0vdGh1bmRlci90aHVuZGVyX2Jn
eC5jIGIvZHJpdmVycy9uZXQvZXRoZXJuZXQvY2F2aXVtL3RodW5kZXIvdGh1bmRlcl9iZ3guYwpp
bmRleCA2NzNjNTdiLi5kMjllY2UwIDEwMDY0NAotLS0gYS9kcml2ZXJzL25ldC9ldGhlcm5ldC9j
YXZpdW0vdGh1bmRlci90aHVuZGVyX2JneC5jCisrKyBiL2RyaXZlcnMvbmV0L2V0aGVybmV0L2Nh
dml1bS90aHVuZGVyL3RodW5kZXJfYmd4LmMKQEAgLTE0ODQsNyArMTQ4NCw3IEBAIHN0YXRpYyBp
bnQgYmd4X2luaXRfb2ZfcGh5KHN0cnVjdCBiZ3ggKmJneCkKIAkJCWJyZWFrOwogCiAJCW1hYyA9
IG9mX2dldF9tYWNfYWRkcmVzcyhub2RlKTsKLQkJaWYgKG1hYykKKwkJaWYgKCFJU19FUlJfT1Jf
TlVMTChtYWMpKQogCQkJZXRoZXJfYWRkcl9jb3B5KGJneC0+bG1hY1tsbWFjXS5tYWMsIG1hYyk7
CiAKIAkJU0VUX05FVERFVl9ERVYoJmJneC0+bG1hY1tsbWFjXS5uZXRkZXYsICZiZ3gtPnBkZXYt
PmRldik7CmRpZmYgLS1naXQgYS9kcml2ZXJzL25ldC9ldGhlcm5ldC9kYXZpY29tL2RtOTAwMC5j
IGIvZHJpdmVycy9uZXQvZXRoZXJuZXQvZGF2aWNvbS9kbTkwMDAuYwppbmRleCBjMjU4NmY0Li4z
MDk0NWRhIDEwMDY0NAotLS0gYS9kcml2ZXJzL25ldC9ldGhlcm5ldC9kYXZpY29tL2RtOTAwMC5j
CisrKyBiL2RyaXZlcnMvbmV0L2V0aGVybmV0L2Rhdmljb20vZG05MDAwLmMKQEAgLTE0MTIsNyAr
MTQxMiw3IEBAIHN0YXRpYyBzdHJ1Y3QgZG05MDAwX3BsYXRfZGF0YSAqZG05MDAwX3BhcnNlX2R0
KHN0cnVjdCBkZXZpY2UgKmRldikKIAkJcGRhdGEtPmZsYWdzIHw9IERNOTAwMF9QTEFURl9OT19F
RVBST007CiAKIAltYWNfYWRkciA9IG9mX2dldF9tYWNfYWRkcmVzcyhucCk7Ci0JaWYgKG1hY19h
ZGRyKQorCWlmICghSVNfRVJSX09SX05VTEwobWFjX2FkZHIpKQogCQltZW1jcHkocGRhdGEtPmRl
dl9hZGRyLCBtYWNfYWRkciwgc2l6ZW9mKHBkYXRhLT5kZXZfYWRkcikpOwogCiAJcmV0dXJuIHBk
YXRhOwpkaWZmIC0tZ2l0IGEvZHJpdmVycy9uZXQvZXRoZXJuZXQvZXRob2MuYyBiL2RyaXZlcnMv
bmV0L2V0aGVybmV0L2V0aG9jLmMKaW5kZXggMGYzZTdmMi4uZWFmOTM3NyAxMDA2NDQKLS0tIGEv
ZHJpdmVycy9uZXQvZXRoZXJuZXQvZXRob2MuYworKysgYi9kcml2ZXJzL25ldC9ldGhlcm5ldC9l
dGhvYy5jCkBAIC0xMTUzLDcgKzExNTMsNyBAQCBzdGF0aWMgaW50IGV0aG9jX3Byb2JlKHN0cnVj
dCBwbGF0Zm9ybV9kZXZpY2UgKnBkZXYpCiAJCWNvbnN0IHZvaWQgKm1hYzsKIAogCQltYWMgPSBv
Zl9nZXRfbWFjX2FkZHJlc3MocGRldi0+ZGV2Lm9mX25vZGUpOwotCQlpZiAobWFjKQorCQlpZiAo
IUlTX0VSUl9PUl9OVUxMKG1hYykpCiAJCQlldGhlcl9hZGRyX2NvcHkobmV0ZGV2LT5kZXZfYWRk
ciwgbWFjKTsKIAkJcHJpdi0+cGh5X2lkID0gLTE7CiAJfQpkaWZmIC0tZ2l0IGEvZHJpdmVycy9u
ZXQvZXRoZXJuZXQvZXpjaGlwL25wc19lbmV0LmMgYi9kcml2ZXJzL25ldC9ldGhlcm5ldC9lemNo
aXAvbnBzX2VuZXQuYwppbmRleCA2NTlmMWFkLi41YWI4YzdlIDEwMDY0NAotLS0gYS9kcml2ZXJz
L25ldC9ldGhlcm5ldC9lemNoaXAvbnBzX2VuZXQuYworKysgYi9kcml2ZXJzL25ldC9ldGhlcm5l
dC9lemNoaXAvbnBzX2VuZXQuYwpAQCAtNjE2LDcgKzYxNiw3IEBAIHN0YXRpYyBzMzIgbnBzX2Vu
ZXRfcHJvYmUoc3RydWN0IHBsYXRmb3JtX2RldmljZSAqcGRldikKIAogCS8qIHNldCBrZXJuZWwg
TUFDIGFkZHJlc3MgdG8gZGV2ICovCiAJbWFjX2FkZHIgPSBvZl9nZXRfbWFjX2FkZHJlc3MoZGV2
LT5vZl9ub2RlKTsKLQlpZiAobWFjX2FkZHIpCisJaWYgKCFJU19FUlJfT1JfTlVMTChtYWNfYWRk
cikpCiAJCWV0aGVyX2FkZHJfY29weShuZGV2LT5kZXZfYWRkciwgbWFjX2FkZHIpOwogCWVsc2UK
IAkJZXRoX2h3X2FkZHJfcmFuZG9tKG5kZXYpOwpkaWZmIC0tZ2l0IGEvZHJpdmVycy9uZXQvZXRo
ZXJuZXQvZnJlZXNjYWxlL2ZlY19tYWluLmMgYi9kcml2ZXJzL25ldC9ldGhlcm5ldC9mcmVlc2Nh
bGUvZmVjX21haW4uYwppbmRleCBhOTZhZDIwLi4xNDVjNjExIDEwMDY0NAotLS0gYS9kcml2ZXJz
L25ldC9ldGhlcm5ldC9mcmVlc2NhbGUvZmVjX21haW4uYworKysgYi9kcml2ZXJzL25ldC9ldGhl
cm5ldC9mcmVlc2NhbGUvZmVjX21haW4uYwpAQCAtMTY1NSw3ICsxNjU1LDcgQEAgc3RhdGljIHZv
aWQgZmVjX2dldF9tYWMoc3RydWN0IG5ldF9kZXZpY2UgKm5kZXYpCiAJCXN0cnVjdCBkZXZpY2Vf
bm9kZSAqbnAgPSBmZXAtPnBkZXYtPmRldi5vZl9ub2RlOwogCQlpZiAobnApIHsKIAkJCWNvbnN0
IGNoYXIgKm1hYyA9IG9mX2dldF9tYWNfYWRkcmVzcyhucCk7Ci0JCQlpZiAobWFjKQorCQkJaWYg
KCFJU19FUlJfT1JfTlVMTChtYWMpKQogCQkJCWlhcCA9ICh1bnNpZ25lZCBjaGFyICopIG1hYzsK
IAkJfQogCX0KZGlmZiAtLWdpdCBhL2RyaXZlcnMvbmV0L2V0aGVybmV0L2ZyZWVzY2FsZS9mZWNf
bXBjNTJ4eC5jIGIvZHJpdmVycy9uZXQvZXRoZXJuZXQvZnJlZXNjYWxlL2ZlY19tcGM1Mnh4LmMK
aW5kZXggYzE5NjhiMy4uM2IzMjNiYiAxMDA2NDQKLS0tIGEvZHJpdmVycy9uZXQvZXRoZXJuZXQv
ZnJlZXNjYWxlL2ZlY19tcGM1Mnh4LmMKKysrIGIvZHJpdmVycy9uZXQvZXRoZXJuZXQvZnJlZXNj
YWxlL2ZlY19tcGM1Mnh4LmMKQEAgLTkwMiw3ICs5MDIsNyBAQCBzdGF0aWMgaW50IG1wYzUyeHhf
ZmVjX3Byb2JlKHN0cnVjdCBwbGF0Zm9ybV9kZXZpY2UgKm9wKQogCSAqIEZpcnN0IHRyeSB0byBy
ZWFkIE1BQyBhZGRyZXNzIGZyb20gRFQKIAkgKi8KIAltYWNfYWRkciA9IG9mX2dldF9tYWNfYWRk
cmVzcyhucCk7Ci0JaWYgKG1hY19hZGRyKSB7CisJaWYgKCFJU19FUlJfT1JfTlVMTChtYWNfYWRk
cikpIHsKIAkJbWVtY3B5KG5kZXYtPmRldl9hZGRyLCBtYWNfYWRkciwgRVRIX0FMRU4pOwogCX0g
ZWxzZSB7CiAJCXN0cnVjdCBtcGM1Mnh4X2ZlYyBfX2lvbWVtICpmZWMgPSBwcml2LT5mZWM7CmRp
ZmYgLS1naXQgYS9kcml2ZXJzL25ldC9ldGhlcm5ldC9mcmVlc2NhbGUvZm1hbi9tYWMuYyBiL2Ry
aXZlcnMvbmV0L2V0aGVybmV0L2ZyZWVzY2FsZS9mbWFuL21hYy5jCmluZGV4IDNjMjE0ODYuLmY3
Y2ZlNDAgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvbmV0L2V0aGVybmV0L2ZyZWVzY2FsZS9mbWFuL21h
Yy5jCisrKyBiL2RyaXZlcnMvbmV0L2V0aGVybmV0L2ZyZWVzY2FsZS9mbWFuL21hYy5jCkBAIC03
MjQsNyArNzI0LDcgQEAgc3RhdGljIGludCBtYWNfcHJvYmUoc3RydWN0IHBsYXRmb3JtX2Rldmlj
ZSAqX29mX2RldikKIAogCS8qIEdldCB0aGUgTUFDIGFkZHJlc3MgKi8KIAltYWNfYWRkciA9IG9m
X2dldF9tYWNfYWRkcmVzcyhtYWNfbm9kZSk7Ci0JaWYgKCFtYWNfYWRkcikgeworCWlmIChJU19F
UlJfT1JfTlVMTChtYWNfYWRkcikpIHsKIAkJZGV2X2VycihkZXYsICJvZl9nZXRfbWFjX2FkZHJl
c3MoJXBPRikgZmFpbGVkXG4iLCBtYWNfbm9kZSk7CiAJCWVyciA9IC1FSU5WQUw7CiAJCWdvdG8g
X3JldHVybl9vZl9nZXRfcGFyZW50OwpkaWZmIC0tZ2l0IGEvZHJpdmVycy9uZXQvZXRoZXJuZXQv
ZnJlZXNjYWxlL2ZzX2VuZXQvZnNfZW5ldC1tYWluLmMgYi9kcml2ZXJzL25ldC9ldGhlcm5ldC9m
cmVlc2NhbGUvZnNfZW5ldC9mc19lbmV0LW1haW4uYwppbmRleCA3YzU0OGVkLi5iZTcwZjllIDEw
MDY0NAotLS0gYS9kcml2ZXJzL25ldC9ldGhlcm5ldC9mcmVlc2NhbGUvZnNfZW5ldC9mc19lbmV0
LW1haW4uYworKysgYi9kcml2ZXJzL25ldC9ldGhlcm5ldC9mcmVlc2NhbGUvZnNfZW5ldC9mc19l
bmV0LW1haW4uYwpAQCAtMTAxNCw3ICsxMDE0LDcgQEAgc3RhdGljIGludCBmc19lbmV0X3Byb2Jl
KHN0cnVjdCBwbGF0Zm9ybV9kZXZpY2UgKm9mZGV2KQogCXNwaW5fbG9ja19pbml0KCZmZXAtPnR4
X2xvY2spOwogCiAJbWFjX2FkZHIgPSBvZl9nZXRfbWFjX2FkZHJlc3Mob2ZkZXYtPmRldi5vZl9u
b2RlKTsKLQlpZiAobWFjX2FkZHIpCisJaWYgKCFJU19FUlJfT1JfTlVMTChtYWNfYWRkcikpCiAJ
CW1lbWNweShuZGV2LT5kZXZfYWRkciwgbWFjX2FkZHIsIEVUSF9BTEVOKTsKIAogCXJldCA9IGZl
cC0+b3BzLT5hbGxvY2F0ZV9iZChuZGV2KTsKZGlmZiAtLWdpdCBhL2RyaXZlcnMvbmV0L2V0aGVy
bmV0L2ZyZWVzY2FsZS9naWFuZmFyLmMgYi9kcml2ZXJzL25ldC9ldGhlcm5ldC9mcmVlc2NhbGUv
Z2lhbmZhci5jCmluZGV4IDQ1ZmNjOTYuLjdlMzMxMjIgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvbmV0
L2V0aGVybmV0L2ZyZWVzY2FsZS9naWFuZmFyLmMKKysrIGIvZHJpdmVycy9uZXQvZXRoZXJuZXQv
ZnJlZXNjYWxlL2dpYW5mYXIuYwpAQCAtODcyLDcgKzg3Miw3IEBAIHN0YXRpYyBpbnQgZ2Zhcl9v
Zl9pbml0KHN0cnVjdCBwbGF0Zm9ybV9kZXZpY2UgKm9mZGV2LCBzdHJ1Y3QgbmV0X2RldmljZSAq
KnBkZXYpCiAKIAltYWNfYWRkciA9IG9mX2dldF9tYWNfYWRkcmVzcyhucCk7CiAKLQlpZiAobWFj
X2FkZHIpCisJaWYgKCFJU19FUlJfT1JfTlVMTChtYWNfYWRkcikpCiAJCW1lbWNweShkZXYtPmRl
dl9hZGRyLCBtYWNfYWRkciwgRVRIX0FMRU4pOwogCiAJaWYgKG1vZGVsICYmICFzdHJjYXNlY21w
KG1vZGVsLCAiVFNFQyIpKQpkaWZmIC0tZ2l0IGEvZHJpdmVycy9uZXQvZXRoZXJuZXQvZnJlZXNj
YWxlL3VjY19nZXRoLmMgYi9kcml2ZXJzL25ldC9ldGhlcm5ldC9mcmVlc2NhbGUvdWNjX2dldGgu
YwppbmRleCBlYjNlNjVlLi5kMTI1ODM2IDEwMDY0NAotLS0gYS9kcml2ZXJzL25ldC9ldGhlcm5l
dC9mcmVlc2NhbGUvdWNjX2dldGguYworKysgYi9kcml2ZXJzL25ldC9ldGhlcm5ldC9mcmVlc2Nh
bGUvdWNjX2dldGguYwpAQCAtMzkxMCw3ICszOTEwLDcgQEAgc3RhdGljIGludCB1Y2NfZ2V0aF9w
cm9iZShzdHJ1Y3QgcGxhdGZvcm1fZGV2aWNlKiBvZmRldikKIAl9CiAKIAltYWNfYWRkciA9IG9m
X2dldF9tYWNfYWRkcmVzcyhucCk7Ci0JaWYgKG1hY19hZGRyKQorCWlmICghSVNfRVJSX09SX05V
TEwobWFjX2FkZHIpKQogCQltZW1jcHkoZGV2LT5kZXZfYWRkciwgbWFjX2FkZHIsIEVUSF9BTEVO
KTsKIAogCXVnZXRoLT51Z19pbmZvID0gdWdfaW5mbzsKZGlmZiAtLWdpdCBhL2RyaXZlcnMvbmV0
L2V0aGVybmV0L2hpc2lsaWNvbi9oaXNpX2ZlbWFjLmMgYi9kcml2ZXJzL25ldC9ldGhlcm5ldC9o
aXNpbGljb24vaGlzaV9mZW1hYy5jCmluZGV4IDJjMjgwODguLjdlNDZkYzkgMTAwNjQ0Ci0tLSBh
L2RyaXZlcnMvbmV0L2V0aGVybmV0L2hpc2lsaWNvbi9oaXNpX2ZlbWFjLmMKKysrIGIvZHJpdmVy
cy9uZXQvZXRoZXJuZXQvaGlzaWxpY29uL2hpc2lfZmVtYWMuYwpAQCAtODcwLDcgKzg3MCw3IEBA
IHN0YXRpYyBpbnQgaGlzaV9mZW1hY19kcnZfcHJvYmUoc3RydWN0IHBsYXRmb3JtX2RldmljZSAq
cGRldikKIAkJCSAgIHBoeV9tb2RlcyhwaHktPmludGVyZmFjZSkpOwogCiAJbWFjX2FkZHIgPSBv
Zl9nZXRfbWFjX2FkZHJlc3Mobm9kZSk7Ci0JaWYgKG1hY19hZGRyKQorCWlmICghSVNfRVJSX09S
X05VTEwobWFjX2FkZHIpKQogCQlldGhlcl9hZGRyX2NvcHkobmRldi0+ZGV2X2FkZHIsIG1hY19h
ZGRyKTsKIAlpZiAoIWlzX3ZhbGlkX2V0aGVyX2FkZHIobmRldi0+ZGV2X2FkZHIpKSB7CiAJCWV0
aF9od19hZGRyX3JhbmRvbShuZGV2KTsKZGlmZiAtLWdpdCBhL2RyaXZlcnMvbmV0L2V0aGVybmV0
L2hpc2lsaWNvbi9oaXg1aGQyX2dtYWMuYyBiL2RyaXZlcnMvbmV0L2V0aGVybmV0L2hpc2lsaWNv
bi9oaXg1aGQyX2dtYWMuYwppbmRleCBlNWQ4NTNiLi5lZDRhM2QyIDEwMDY0NAotLS0gYS9kcml2
ZXJzL25ldC9ldGhlcm5ldC9oaXNpbGljb24vaGl4NWhkMl9nbWFjLmMKKysrIGIvZHJpdmVycy9u
ZXQvZXRoZXJuZXQvaGlzaWxpY29uL2hpeDVoZDJfZ21hYy5jCkBAIC0xMjI5LDcgKzEyMjksNyBA
QCBzdGF0aWMgaW50IGhpeDVoZDJfZGV2X3Byb2JlKHN0cnVjdCBwbGF0Zm9ybV9kZXZpY2UgKnBk
ZXYpCiAJfQogCiAJbWFjX2FkZHIgPSBvZl9nZXRfbWFjX2FkZHJlc3Mobm9kZSk7Ci0JaWYgKG1h
Y19hZGRyKQorCWlmICghSVNfRVJSX09SX05VTEwobWFjX2FkZHIpKQogCQlldGhlcl9hZGRyX2Nv
cHkobmRldi0+ZGV2X2FkZHIsIG1hY19hZGRyKTsKIAlpZiAoIWlzX3ZhbGlkX2V0aGVyX2FkZHIo
bmRldi0+ZGV2X2FkZHIpKSB7CiAJCWV0aF9od19hZGRyX3JhbmRvbShuZGV2KTsKZGlmZiAtLWdp
dCBhL2RyaXZlcnMvbmV0L2V0aGVybmV0L2xhbnRpcV94cngyMDAuYyBiL2RyaXZlcnMvbmV0L2V0
aGVybmV0L2xhbnRpcV94cngyMDAuYwppbmRleCBkMjkxMDRkLi4yMzA4NDc5IDEwMDY0NAotLS0g
YS9kcml2ZXJzL25ldC9ldGhlcm5ldC9sYW50aXFfeHJ4MjAwLmMKKysrIGIvZHJpdmVycy9uZXQv
ZXRoZXJuZXQvbGFudGlxX3hyeDIwMC5jCkBAIC00NzgsNyArNDc4LDcgQEAgc3RhdGljIGludCB4
cngyMDBfcHJvYmUoc3RydWN0IHBsYXRmb3JtX2RldmljZSAqcGRldikKIAl9CiAKIAltYWMgPSBv
Zl9nZXRfbWFjX2FkZHJlc3MobnApOwotCWlmIChtYWMgJiYgaXNfdmFsaWRfZXRoZXJfYWRkciht
YWMpKQorCWlmICghSVNfRVJSX09SX05VTEwobWFjKSkKIAkJZXRoZXJfYWRkcl9jb3B5KG5ldF9k
ZXYtPmRldl9hZGRyLCBtYWMpOwogCWVsc2UKIAkJZXRoX2h3X2FkZHJfcmFuZG9tKG5ldF9kZXYp
OwpkaWZmIC0tZ2l0IGEvZHJpdmVycy9uZXQvZXRoZXJuZXQvbWFydmVsbC9tdjY0M3h4X2V0aC5j
IGIvZHJpdmVycy9uZXQvZXRoZXJuZXQvbWFydmVsbC9tdjY0M3h4X2V0aC5jCmluZGV4IDI5MmE2
NjguLmFhMzVmNzIgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvbmV0L2V0aGVybmV0L21hcnZlbGwvbXY2
NDN4eF9ldGguYworKysgYi9kcml2ZXJzL25ldC9ldGhlcm5ldC9tYXJ2ZWxsL212NjQzeHhfZXRo
LmMKQEAgLTI3NDksNyArMjc0OSw3IEBAIHN0YXRpYyBpbnQgbXY2NDN4eF9ldGhfc2hhcmVkX29m
X2FkZF9wb3J0KHN0cnVjdCBwbGF0Zm9ybV9kZXZpY2UgKnBkZXYsCiAJfQogCiAJbWFjX2FkZHIg
PSBvZl9nZXRfbWFjX2FkZHJlc3MocG5wKTsKLQlpZiAobWFjX2FkZHIpCisJaWYgKCFJU19FUlJf
T1JfTlVMTChtYWNfYWRkcikpCiAJCW1lbWNweShwcGQubWFjX2FkZHIsIG1hY19hZGRyLCBFVEhf
QUxFTik7CiAKIAltdjY0M3h4X2V0aF9wcm9wZXJ0eShwbnAsICJ0eC1xdWV1ZS1zaXplIiwgcHBk
LnR4X3F1ZXVlX3NpemUpOwpkaWZmIC0tZ2l0IGEvZHJpdmVycy9uZXQvZXRoZXJuZXQvbWFydmVs
bC9tdm5ldGEuYyBiL2RyaXZlcnMvbmV0L2V0aGVybmV0L21hcnZlbGwvbXZuZXRhLmMKaW5kZXgg
YzBhMzcxOC4uMTE3YmNmNCAxMDA2NDQKLS0tIGEvZHJpdmVycy9uZXQvZXRoZXJuZXQvbWFydmVs
bC9tdm5ldGEuYworKysgYi9kcml2ZXJzL25ldC9ldGhlcm5ldC9tYXJ2ZWxsL212bmV0YS5jCkBA
IC00NTYzLDcgKzQ1NjMsNyBAQCBzdGF0aWMgaW50IG12bmV0YV9wcm9iZShzdHJ1Y3QgcGxhdGZv
cm1fZGV2aWNlICpwZGV2KQogCX0KIAogCWR0X21hY19hZGRyID0gb2ZfZ2V0X21hY19hZGRyZXNz
KGRuKTsKLQlpZiAoZHRfbWFjX2FkZHIpIHsKKwlpZiAoIUlTX0VSUl9PUl9OVUxMKGR0X21hY19h
ZGRyKSkgewogCQltYWNfZnJvbSA9ICJkZXZpY2UgdHJlZSI7CiAJCW1lbWNweShkZXYtPmRldl9h
ZGRyLCBkdF9tYWNfYWRkciwgRVRIX0FMRU4pOwogCX0gZWxzZSB7CmRpZmYgLS1naXQgYS9kcml2
ZXJzL25ldC9ldGhlcm5ldC9tYXJ2ZWxsL3B4YTE2OF9ldGguYyBiL2RyaXZlcnMvbmV0L2V0aGVy
bmV0L21hcnZlbGwvcHhhMTY4X2V0aC5jCmluZGV4IDM1ZjIxNDIuLmNlMDM3ZTggMTAwNjQ0Ci0t
LSBhL2RyaXZlcnMvbmV0L2V0aGVybmV0L21hcnZlbGwvcHhhMTY4X2V0aC5jCisrKyBiL2RyaXZl
cnMvbmV0L2V0aGVybmV0L21hcnZlbGwvcHhhMTY4X2V0aC5jCkBAIC0xNDYxLDcgKzE0NjEsNyBA
QCBzdGF0aWMgaW50IHB4YTE2OF9ldGhfcHJvYmUoc3RydWN0IHBsYXRmb3JtX2RldmljZSAqcGRl
dikKIAlpZiAocGRldi0+ZGV2Lm9mX25vZGUpCiAJCW1hY19hZGRyID0gb2ZfZ2V0X21hY19hZGRy
ZXNzKHBkZXYtPmRldi5vZl9ub2RlKTsKIAotCWlmIChtYWNfYWRkciAmJiBpc192YWxpZF9ldGhl
cl9hZGRyKG1hY19hZGRyKSkgeworCWlmICghSVNfRVJSX09SX05VTEwobWFjX2FkZHIpKSB7CiAJ
CWV0aGVyX2FkZHJfY29weShkZXYtPmRldl9hZGRyLCBtYWNfYWRkcik7CiAJfSBlbHNlIHsKIAkJ
LyogdHJ5IHJlYWRpbmcgdGhlIG1hYyBhZGRyZXNzLCBpZiBzZXQgYnkgdGhlIGJvb3Rsb2FkZXIg
Ki8KZGlmZiAtLWdpdCBhL2RyaXZlcnMvbmV0L2V0aGVybmV0L21hcnZlbGwvc2t5Mi5jIGIvZHJp
dmVycy9uZXQvZXRoZXJuZXQvbWFydmVsbC9za3kyLmMKaW5kZXggOGIzNDk1ZS4uODIxMTc3ZiAx
MDA2NDQKLS0tIGEvZHJpdmVycy9uZXQvZXRoZXJuZXQvbWFydmVsbC9za3kyLmMKKysrIGIvZHJp
dmVycy9uZXQvZXRoZXJuZXQvbWFydmVsbC9za3kyLmMKQEAgLTQ4MDgsNyArNDgwOCw3IEBAIHN0
YXRpYyBzdHJ1Y3QgbmV0X2RldmljZSAqc2t5Ml9pbml0X25ldGRldihzdHJ1Y3Qgc2t5Ml9odyAq
aHcsIHVuc2lnbmVkIHBvcnQsCiAJICogMikgZnJvbSBpbnRlcm5hbCByZWdpc3RlcnMgc2V0IGJ5
IGJvb3Rsb2FkZXIKIAkgKi8KIAlpYXAgPSBvZl9nZXRfbWFjX2FkZHJlc3MoaHctPnBkZXYtPmRl
di5vZl9ub2RlKTsKLQlpZiAoaWFwKQorCWlmICghSVNfRVJSX09SX05VTEwoaWFwKSkKIAkJbWVt
Y3B5KGRldi0+ZGV2X2FkZHIsIGlhcCwgRVRIX0FMRU4pOwogCWVsc2UKIAkJbWVtY3B5X2Zyb21p
byhkZXYtPmRldl9hZGRyLCBody0+cmVncyArIEIyX01BQ18xICsgcG9ydCAqIDgsCmRpZmYgLS1n
aXQgYS9kcml2ZXJzL25ldC9ldGhlcm5ldC9tZWRpYXRlay9tdGtfZXRoX3NvYy5jIGIvZHJpdmVy
cy9uZXQvZXRoZXJuZXQvbWVkaWF0ZWsvbXRrX2V0aF9zb2MuYwppbmRleCA1NDlkMzY0Li4wM2Ni
NTlhIDEwMDY0NAotLS0gYS9kcml2ZXJzL25ldC9ldGhlcm5ldC9tZWRpYXRlay9tdGtfZXRoX3Nv
Yy5jCisrKyBiL2RyaXZlcnMvbmV0L2V0aGVybmV0L21lZGlhdGVrL210a19ldGhfc29jLmMKQEAg
LTIwMjcsNyArMjAyNyw3IEBAIHN0YXRpYyBpbnQgX19pbml0IG10a19pbml0KHN0cnVjdCBuZXRf
ZGV2aWNlICpkZXYpCiAJY29uc3QgY2hhciAqbWFjX2FkZHI7CiAKIAltYWNfYWRkciA9IG9mX2dl
dF9tYWNfYWRkcmVzcyhtYWMtPm9mX25vZGUpOwotCWlmIChtYWNfYWRkcikKKwlpZiAoIUlTX0VS
Ul9PUl9OVUxMKG1hY19hZGRyKSkKIAkJZXRoZXJfYWRkcl9jb3B5KGRldi0+ZGV2X2FkZHIsIG1h
Y19hZGRyKTsKIAogCS8qIElmIHRoZSBtYWMgYWRkcmVzcyBpcyBpbnZhbGlkLCB1c2UgcmFuZG9t
IG1hYyBhZGRyZXNzICAqLwpkaWZmIC0tZ2l0IGEvZHJpdmVycy9uZXQvZXRoZXJuZXQvbWljcmVs
L2tzODg1MS5jIGIvZHJpdmVycy9uZXQvZXRoZXJuZXQvbWljcmVsL2tzODg1MS5jCmluZGV4IDc4
NDkxMTkuLmIxYjI4OTYgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvbmV0L2V0aGVybmV0L21pY3JlbC9r
czg4NTEuYworKysgYi9kcml2ZXJzL25ldC9ldGhlcm5ldC9taWNyZWwva3M4ODUxLmMKQEAgLTQy
NSw3ICs0MjUsNyBAQCBzdGF0aWMgdm9pZCBrczg4NTFfaW5pdF9tYWMoc3RydWN0IGtzODg1MV9u
ZXQgKmtzKQogCWNvbnN0IHU4ICptYWNfYWRkcjsKIAogCW1hY19hZGRyID0gb2ZfZ2V0X21hY19h
ZGRyZXNzKGtzLT5zcGlkZXYtPmRldi5vZl9ub2RlKTsKLQlpZiAobWFjX2FkZHIpIHsKKwlpZiAo
IUlTX0VSUl9PUl9OVUxMKG1hY19hZGRyKSkgewogCQltZW1jcHkoZGV2LT5kZXZfYWRkciwgbWFj
X2FkZHIsIEVUSF9BTEVOKTsKIAkJa3M4ODUxX3dyaXRlX21hY19hZGRyKGRldik7CiAJCXJldHVy
bjsKZGlmZiAtLWdpdCBhL2RyaXZlcnMvbmV0L2V0aGVybmV0L21pY3JlbC9rczg4NTFfbWxsLmMg
Yi9kcml2ZXJzL25ldC9ldGhlcm5ldC9taWNyZWwva3M4ODUxX21sbC5jCmluZGV4IGM5NDY4NDEu
LmQ0NGEwOTQgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvbmV0L2V0aGVybmV0L21pY3JlbC9rczg4NTFf
bWxsLmMKKysrIGIvZHJpdmVycy9uZXQvZXRoZXJuZXQvbWljcmVsL2tzODg1MV9tbGwuYwpAQCAt
MTMyNyw3ICsxMzI3LDcgQEAgc3RhdGljIGludCBrczg4NTFfcHJvYmUoc3RydWN0IHBsYXRmb3Jt
X2RldmljZSAqcGRldikKIAkvKiBvdmVyd3JpdGluZyB0aGUgZGVmYXVsdCBNQUMgYWRkcmVzcyAq
LwogCWlmIChwZGV2LT5kZXYub2Zfbm9kZSkgewogCQltYWMgPSBvZl9nZXRfbWFjX2FkZHJlc3Mo
cGRldi0+ZGV2Lm9mX25vZGUpOwotCQlpZiAobWFjKQorCQlpZiAoIUlTX0VSUl9PUl9OVUxMKG1h
YykpCiAJCQltZW1jcHkoa3MtPm1hY19hZGRyLCBtYWMsIEVUSF9BTEVOKTsKIAl9IGVsc2Ugewog
CQlzdHJ1Y3Qga3M4ODUxX21sbF9wbGF0Zm9ybV9kYXRhICpwZGF0YTsKZGlmZiAtLWdpdCBhL2Ry
aXZlcnMvbmV0L2V0aGVybmV0L21pY3JvY2hpcC9lbmMyOGo2MC5jIGIvZHJpdmVycy9uZXQvZXRo
ZXJuZXQvbWljcm9jaGlwL2VuYzI4ajYwLmMKaW5kZXggOGY3MjU4Ny4uZjhkNWZkMyAxMDA2NDQK
LS0tIGEvZHJpdmVycy9uZXQvZXRoZXJuZXQvbWljcm9jaGlwL2VuYzI4ajYwLmMKKysrIGIvZHJp
dmVycy9uZXQvZXRoZXJuZXQvbWljcm9jaGlwL2VuYzI4ajYwLmMKQEAgLTE1ODgsNyArMTU4OCw3
IEBAIHN0YXRpYyBpbnQgZW5jMjhqNjBfcHJvYmUoc3RydWN0IHNwaV9kZXZpY2UgKnNwaSkKIAl9
CiAKIAltYWNhZGRyID0gb2ZfZ2V0X21hY19hZGRyZXNzKHNwaS0+ZGV2Lm9mX25vZGUpOwotCWlm
IChtYWNhZGRyKQorCWlmICghSVNfRVJSX09SX05VTEwobWFjYWRkcikpCiAJCWV0aGVyX2FkZHJf
Y29weShkZXYtPmRldl9hZGRyLCBtYWNhZGRyKTsKIAllbHNlCiAJCWV0aF9od19hZGRyX3JhbmRv
bShkZXYpOwpkaWZmIC0tZ2l0IGEvZHJpdmVycy9uZXQvZXRoZXJuZXQvbnhwL2xwY19ldGguYyBi
L2RyaXZlcnMvbmV0L2V0aGVybmV0L254cC9scGNfZXRoLmMKaW5kZXggODlkMTczOS4uMzM2YjZh
YSAxMDA2NDQKLS0tIGEvZHJpdmVycy9uZXQvZXRoZXJuZXQvbnhwL2xwY19ldGguYworKysgYi9k
cml2ZXJzL25ldC9ldGhlcm5ldC9ueHAvbHBjX2V0aC5jCkBAIC0xMzY4LDcgKzEzNjgsNyBAQCBz
dGF0aWMgaW50IGxwY19ldGhfZHJ2X3Byb2JlKHN0cnVjdCBwbGF0Zm9ybV9kZXZpY2UgKnBkZXYp
CiAKIAlpZiAoIWlzX3ZhbGlkX2V0aGVyX2FkZHIobmRldi0+ZGV2X2FkZHIpKSB7CiAJCWNvbnN0
IGNoYXIgKm1hY2FkZHIgPSBvZl9nZXRfbWFjX2FkZHJlc3MobnApOwotCQlpZiAobWFjYWRkcikK
KwkJaWYgKCFJU19FUlJfT1JfTlVMTChtYWNhZGRyKSkKIAkJCW1lbWNweShuZGV2LT5kZXZfYWRk
ciwgbWFjYWRkciwgRVRIX0FMRU4pOwogCX0KIAlpZiAoIWlzX3ZhbGlkX2V0aGVyX2FkZHIobmRl
di0+ZGV2X2FkZHIpKQpkaWZmIC0tZ2l0IGEvZHJpdmVycy9uZXQvZXRoZXJuZXQvcXVhbGNvbW0v
cWNhX3NwaS5jIGIvZHJpdmVycy9uZXQvZXRoZXJuZXQvcXVhbGNvbW0vcWNhX3NwaS5jCmluZGV4
IDk3ZjkyOTUuLmRlZjUxOTIgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvbmV0L2V0aGVybmV0L3F1YWxj
b21tL3FjYV9zcGkuYworKysgYi9kcml2ZXJzL25ldC9ldGhlcm5ldC9xdWFsY29tbS9xY2Ffc3Bp
LmMKQEAgLTk2Niw3ICs5NjYsNyBAQAogCiAJbWFjID0gb2ZfZ2V0X21hY19hZGRyZXNzKHNwaS0+
ZGV2Lm9mX25vZGUpOwogCi0JaWYgKG1hYykKKwlpZiAoIUlTX0VSUl9PUl9OVUxMKG1hYykpCiAJ
CWV0aGVyX2FkZHJfY29weShxY2EtPm5ldF9kZXYtPmRldl9hZGRyLCBtYWMpOwogCiAJaWYgKCFp
c192YWxpZF9ldGhlcl9hZGRyKHFjYS0+bmV0X2Rldi0+ZGV2X2FkZHIpKSB7CmRpZmYgLS1naXQg
YS9kcml2ZXJzL25ldC9ldGhlcm5ldC9xdWFsY29tbS9xY2FfdWFydC5jIGIvZHJpdmVycy9uZXQv
ZXRoZXJuZXQvcXVhbGNvbW0vcWNhX3VhcnQuYwppbmRleCBkYjYwNjhjLi5hZTc4MDY2IDEwMDY0
NAotLS0gYS9kcml2ZXJzL25ldC9ldGhlcm5ldC9xdWFsY29tbS9xY2FfdWFydC5jCisrKyBiL2Ry
aXZlcnMvbmV0L2V0aGVybmV0L3F1YWxjb21tL3FjYV91YXJ0LmMKQEAgLTM1MSw3ICszNTEsNyBA
QCBzdGF0aWMgaW50IHFjYV91YXJ0X3Byb2JlKHN0cnVjdCBzZXJkZXZfZGV2aWNlICpzZXJkZXYp
CiAKIAltYWMgPSBvZl9nZXRfbWFjX2FkZHJlc3Moc2VyZGV2LT5kZXYub2Zfbm9kZSk7CiAKLQlp
ZiAobWFjKQorCWlmICghSVNfRVJSX09SX05VTEwobWFjKSkKIAkJZXRoZXJfYWRkcl9jb3B5KHFj
YS0+bmV0X2Rldi0+ZGV2X2FkZHIsIG1hYyk7CiAKIAlpZiAoIWlzX3ZhbGlkX2V0aGVyX2FkZHIo
cWNhLT5uZXRfZGV2LT5kZXZfYWRkcikpIHsKZGlmZiAtLWdpdCBhL2RyaXZlcnMvbmV0L2V0aGVy
bmV0L3JlbmVzYXMvcmF2Yl9tYWluLmMgYi9kcml2ZXJzL25ldC9ldGhlcm5ldC9yZW5lc2FzL3Jh
dmJfbWFpbi5jCmluZGV4IDgxNTRiMzguLjc3ZTliMDIgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvbmV0
L2V0aGVybmV0L3JlbmVzYXMvcmF2Yl9tYWluLmMKKysrIGIvZHJpdmVycy9uZXQvZXRoZXJuZXQv
cmVuZXNhcy9yYXZiX21haW4uYwpAQCAtMTExLDcgKzExMSw3IEBAIHN0YXRpYyB2b2lkIHJhdmJf
c2V0X2J1ZmZlcl9hbGlnbihzdHJ1Y3Qgc2tfYnVmZiAqc2tiKQogICovCiBzdGF0aWMgdm9pZCBy
YXZiX3JlYWRfbWFjX2FkZHJlc3Moc3RydWN0IG5ldF9kZXZpY2UgKm5kZXYsIGNvbnN0IHU4ICpt
YWMpCiB7Ci0JaWYgKG1hYykgeworCWlmICghSVNfRVJSX09SX05VTEwobWFjKSkgewogCQlldGhl
cl9hZGRyX2NvcHkobmRldi0+ZGV2X2FkZHIsIG1hYyk7CiAJfSBlbHNlIHsKIAkJdTMyIG1haHIg
PSByYXZiX3JlYWQobmRldiwgTUFIUik7CmRpZmYgLS1naXQgYS9kcml2ZXJzL25ldC9ldGhlcm5l
dC9yZW5lc2FzL3NoX2V0aC5jIGIvZHJpdmVycy9uZXQvZXRoZXJuZXQvcmVuZXNhcy9zaF9ldGgu
YwppbmRleCBlMzNhZjM3Li5lODliYTgyIDEwMDY0NAotLS0gYS9kcml2ZXJzL25ldC9ldGhlcm5l
dC9yZW5lc2FzL3NoX2V0aC5jCisrKyBiL2RyaXZlcnMvbmV0L2V0aGVybmV0L3JlbmVzYXMvc2hf
ZXRoLmMKQEAgLTMxOTMsNyArMzE5Myw3IEBAIHN0YXRpYyBzdHJ1Y3Qgc2hfZXRoX3BsYXRfZGF0
YSAqc2hfZXRoX3BhcnNlX2R0KHN0cnVjdCBkZXZpY2UgKmRldikKIAlwZGF0YS0+cGh5X2ludGVy
ZmFjZSA9IHJldDsKIAogCW1hY19hZGRyID0gb2ZfZ2V0X21hY19hZGRyZXNzKG5wKTsKLQlpZiAo
bWFjX2FkZHIpCisJaWYgKCFJU19FUlJfT1JfTlVMTChtYWNfYWRkcikpCiAJCW1lbWNweShwZGF0
YS0+bWFjX2FkZHIsIG1hY19hZGRyLCBFVEhfQUxFTik7CiAKIAlwZGF0YS0+bm9fZXRoZXJfbGlu
ayA9CmRpZmYgLS1naXQgYS9kcml2ZXJzL25ldC9ldGhlcm5ldC9zYW1zdW5nL3N4Z2JlL3N4Z2Jl
X3BsYXRmb3JtLmMgYi9kcml2ZXJzL25ldC9ldGhlcm5ldC9zYW1zdW5nL3N4Z2JlL3N4Z2JlX3Bs
YXRmb3JtLmMKaW5kZXggZmJkMDBjYi4uZDJiYzk0MSAxMDA2NDQKLS0tIGEvZHJpdmVycy9uZXQv
ZXRoZXJuZXQvc2Ftc3VuZy9zeGdiZS9zeGdiZV9wbGF0Zm9ybS5jCisrKyBiL2RyaXZlcnMvbmV0
L2V0aGVybmV0L3NhbXN1bmcvc3hnYmUvc3hnYmVfcGxhdGZvcm0uYwpAQCAtMTI0LDcgKzEyNCw3
IEBAIHN0YXRpYyBpbnQgc3hnYmVfcGxhdGZvcm1fcHJvYmUoc3RydWN0IHBsYXRmb3JtX2Rldmlj
ZSAqcGRldikKIAl9CiAKIAkvKiBHZXQgTUFDIGFkZHJlc3MgaWYgYXZhaWxhYmxlIChEVCkgKi8K
LQlpZiAobWFjKQorCWlmICghSVNfRVJSX09SX05VTEwobWFjKSkKIAkJZXRoZXJfYWRkcl9jb3B5
KHByaXYtPmRldi0+ZGV2X2FkZHIsIG1hYyk7CiAKIAkvKiBHZXQgdGhlIFRYL1JYIElSUSBudW1i
ZXJzICovCmRpZmYgLS1naXQgYS9kcml2ZXJzL25ldC9ldGhlcm5ldC9zb2Npb25leHQvc25pX2F2
ZS5jIGIvZHJpdmVycy9uZXQvZXRoZXJuZXQvc29jaW9uZXh0L3NuaV9hdmUuYwppbmRleCBiYjZk
NWZiLi40MTk0ZWY3IDEwMDY0NAotLS0gYS9kcml2ZXJzL25ldC9ldGhlcm5ldC9zb2Npb25leHQv
c25pX2F2ZS5jCisrKyBiL2RyaXZlcnMvbmV0L2V0aGVybmV0L3NvY2lvbmV4dC9zbmlfYXZlLmMK
QEAgLTE1OTksNyArMTU5OSw3IEBAIHN0YXRpYyBpbnQgYXZlX3Byb2JlKHN0cnVjdCBwbGF0Zm9y
bV9kZXZpY2UgKnBkZXYpCiAJbmRldi0+bWF4X210dSA9IEFWRV9NQVhfRVRIRlJBTUUgLSAoRVRI
X0hMRU4gKyBFVEhfRkNTX0xFTik7CiAKIAltYWNfYWRkciA9IG9mX2dldF9tYWNfYWRkcmVzcyhu
cCk7Ci0JaWYgKG1hY19hZGRyKQorCWlmICghSVNfRVJSX09SX05VTEwobWFjX2FkZHIpKQogCQll
dGhlcl9hZGRyX2NvcHkobmRldi0+ZGV2X2FkZHIsIG1hY19hZGRyKTsKIAogCS8qIGlmIHRoZSBt
YWMgYWRkcmVzcyBpcyBpbnZhbGlkLCB1c2UgcmFuZG9tIG1hYyBhZGRyZXNzICovCmRpZmYgLS1n
aXQgYS9kcml2ZXJzL25ldC9ldGhlcm5ldC9zdG1pY3JvL3N0bW1hYy9zdG1tYWNfbWFpbi5jIGIv
ZHJpdmVycy9uZXQvZXRoZXJuZXQvc3RtaWNyby9zdG1tYWMvc3RtbWFjX21haW4uYwppbmRleCA0
ODcxMjQzLi5kMzY2NGU2IDEwMDY0NAotLS0gYS9kcml2ZXJzL25ldC9ldGhlcm5ldC9zdG1pY3Jv
L3N0bW1hYy9zdG1tYWNfbWFpbi5jCisrKyBiL2RyaXZlcnMvbmV0L2V0aGVybmV0L3N0bWljcm8v
c3RtbWFjL3N0bW1hY19tYWluLmMKQEAgLTQyNjIsNyArNDI2Miw3IEBAIGludCBzdG1tYWNfZHZy
X3Byb2JlKHN0cnVjdCBkZXZpY2UgKmRldmljZSwKIAlwcml2LT53b2xfaXJxID0gcmVzLT53b2xf
aXJxOwogCXByaXYtPmxwaV9pcnEgPSByZXMtPmxwaV9pcnE7CiAKLQlpZiAocmVzLT5tYWMpCisJ
aWYgKCFJU19FUlJfT1JfTlVMTChyZXMtPm1hYykpCiAJCW1lbWNweShwcml2LT5kZXYtPmRldl9h
ZGRyLCByZXMtPm1hYywgRVRIX0FMRU4pOwogCiAJZGV2X3NldF9kcnZkYXRhKGRldmljZSwgcHJp
di0+ZGV2KTsKZGlmZiAtLWdpdCBhL2RyaXZlcnMvbmV0L2V0aGVybmV0L3RpL2Nwc3cuYyBiL2Ry
aXZlcnMvbmV0L2V0aGVybmV0L3RpL2Nwc3cuYwppbmRleCBhNTkxNTgzLi42YWFhY2FmIDEwMDY0
NAotLS0gYS9kcml2ZXJzL25ldC9ldGhlcm5ldC90aS9jcHN3LmMKKysrIGIvZHJpdmVycy9uZXQv
ZXRoZXJuZXQvdGkvY3Bzdy5jCkBAIC0zMzQ0LDcgKzMzNDQsNyBAQCBzdGF0aWMgaW50IGNwc3df
cHJvYmVfZHQoc3RydWN0IGNwc3dfcGxhdGZvcm1fZGF0YSAqZGF0YSwKIAogbm9fcGh5X3NsYXZl
OgogCQltYWNfYWRkciA9IG9mX2dldF9tYWNfYWRkcmVzcyhzbGF2ZV9ub2RlKTsKLQkJaWYgKG1h
Y19hZGRyKSB7CisJCWlmICghSVNfRVJSX09SX05VTEwobWFjX2FkZHIpKSB7CiAJCQltZW1jcHko
c2xhdmVfZGF0YS0+bWFjX2FkZHIsIG1hY19hZGRyLCBFVEhfQUxFTik7CiAJCX0gZWxzZSB7CiAJ
CQlyZXQgPSB0aV9jbV9nZXRfbWFjaWQoJnBkZXYtPmRldiwgaSwKZGlmZiAtLWdpdCBhL2RyaXZl
cnMvbmV0L2V0aGVybmV0L3RpL25ldGNwX2NvcmUuYyBiL2RyaXZlcnMvbmV0L2V0aGVybmV0L3Rp
L25ldGNwX2NvcmUuYwppbmRleCBkODQ3ZjY3Li5jNDEzNjM3IDEwMDY0NAotLS0gYS9kcml2ZXJz
L25ldC9ldGhlcm5ldC90aS9uZXRjcF9jb3JlLmMKKysrIGIvZHJpdmVycy9uZXQvZXRoZXJuZXQv
dGkvbmV0Y3BfY29yZS5jCkBAIC0yMDQ1LDcgKzIwNDUsNyBAQCBzdGF0aWMgaW50IG5ldGNwX2Ny
ZWF0ZV9pbnRlcmZhY2Uoc3RydWN0IG5ldGNwX2RldmljZSAqbmV0Y3BfZGV2aWNlLAogCQlkZXZt
X3JlbGVhc2VfbWVtX3JlZ2lvbihkZXYsIHJlcy5zdGFydCwgc2l6ZSk7CiAJfSBlbHNlIHsKIAkJ
bWFjX2FkZHIgPSBvZl9nZXRfbWFjX2FkZHJlc3Mobm9kZV9pbnRlcmZhY2UpOwotCQlpZiAobWFj
X2FkZHIpCisJCWlmICghSVNfRVJSX09SX05VTEwobWFjX2FkZHIpKQogCQkJZXRoZXJfYWRkcl9j
b3B5KG5kZXYtPmRldl9hZGRyLCBtYWNfYWRkcik7CiAJCWVsc2UKIAkJCWV0aF9yYW5kb21fYWRk
cihuZGV2LT5kZXZfYWRkcik7CmRpZmYgLS1naXQgYS9kcml2ZXJzL25ldC9ldGhlcm5ldC93aXpu
ZXQvdzUxMDAuYyBiL2RyaXZlcnMvbmV0L2V0aGVybmV0L3dpem5ldC93NTEwMC5jCmluZGV4IGQ4
YmE1MTIuLmIwMDUyOTMzIDEwMDY0NAotLS0gYS9kcml2ZXJzL25ldC9ldGhlcm5ldC93aXpuZXQv
dzUxMDAuYworKysgYi9kcml2ZXJzL25ldC9ldGhlcm5ldC93aXpuZXQvdzUxMDAuYwpAQCAtMTE2
NCw3ICsxMTY0LDcgQEAgaW50IHc1MTAwX3Byb2JlKHN0cnVjdCBkZXZpY2UgKmRldiwgY29uc3Qg
c3RydWN0IHc1MTAwX29wcyAqb3BzLAogCUlOSVRfV09SSygmcHJpdi0+c2V0cnhfd29yaywgdzUx
MDBfc2V0cnhfd29yayk7CiAJSU5JVF9XT1JLKCZwcml2LT5yZXN0YXJ0X3dvcmssIHc1MTAwX3Jl
c3RhcnRfd29yayk7CiAKLQlpZiAobWFjX2FkZHIpCisJaWYgKCFJU19FUlJfT1JfTlVMTChtYWNf
YWRkcikpCiAJCW1lbWNweShuZGV2LT5kZXZfYWRkciwgbWFjX2FkZHIsIEVUSF9BTEVOKTsKIAll
bHNlCiAJCWV0aF9od19hZGRyX3JhbmRvbShuZGV2KTsKZGlmZiAtLWdpdCBhL2RyaXZlcnMvbmV0
L2V0aGVybmV0L3hpbGlueC9sbF90ZW1hY19tYWluLmMgYi9kcml2ZXJzL25ldC9ldGhlcm5ldC94
aWxpbngvbGxfdGVtYWNfbWFpbi5jCmluZGV4IDQ0ZWZmZmIuLjkzN2RjYTAgMTAwNjQ0Ci0tLSBh
L2RyaXZlcnMvbmV0L2V0aGVybmV0L3hpbGlueC9sbF90ZW1hY19tYWluLmMKKysrIGIvZHJpdmVy
cy9uZXQvZXRoZXJuZXQveGlsaW54L2xsX3RlbWFjX21haW4uYwpAQCAtMTA3Nyw3ICsxMDc3LDcg
QEAgc3RhdGljIGludCB0ZW1hY19vZl9wcm9iZShzdHJ1Y3QgcGxhdGZvcm1fZGV2aWNlICpvcCkK
IAogCS8qIFJldHJpZXZlIHRoZSBNQUMgYWRkcmVzcyAqLwogCWFkZHIgPSBvZl9nZXRfbWFjX2Fk
ZHJlc3Mob3AtPmRldi5vZl9ub2RlKTsKLQlpZiAoIWFkZHIpIHsKKwlpZiAoSVNfRVJSX09SX05V
TEwoYWRkcikpIHsKIAkJZGV2X2Vycigmb3AtPmRldiwgImNvdWxkIG5vdCBmaW5kIE1BQyBhZGRy
ZXNzXG4iKTsKIAkJcmMgPSAtRU5PREVWOwogCQlnb3RvIGVycl9pb3VubWFwXzI7CmRpZmYgLS1n
aXQgYS9kcml2ZXJzL25ldC9ldGhlcm5ldC94aWxpbngveGlsaW54X2F4aWVuZXRfbWFpbi5jIGIv
ZHJpdmVycy9uZXQvZXRoZXJuZXQveGlsaW54L3hpbGlueF9heGllbmV0X21haW4uYwppbmRleCA0
MDQxYzc1Li41NWY5ZDFiIDEwMDY0NAotLS0gYS9kcml2ZXJzL25ldC9ldGhlcm5ldC94aWxpbngv
eGlsaW54X2F4aWVuZXRfbWFpbi5jCisrKyBiL2RyaXZlcnMvbmV0L2V0aGVybmV0L3hpbGlueC94
aWxpbnhfYXhpZW5ldF9tYWluLmMKQEAgLTE1OTYsNyArMTU5Niw3IEBAIHN0YXRpYyBpbnQgYXhp
ZW5ldF9wcm9iZShzdHJ1Y3QgcGxhdGZvcm1fZGV2aWNlICpwZGV2KQogCiAJLyogUmV0cmlldmUg
dGhlIE1BQyBhZGRyZXNzICovCiAJbWFjX2FkZHIgPSBvZl9nZXRfbWFjX2FkZHJlc3MocGRldi0+
ZGV2Lm9mX25vZGUpOwotCWlmICghbWFjX2FkZHIpIHsKKwlpZiAoSVNfRVJSX09SX05VTEwobWFj
X2FkZHIpKSB7CiAJCWRldl9lcnIoJnBkZXYtPmRldiwgImNvdWxkIG5vdCBmaW5kIE1BQyBhZGRy
ZXNzXG4iKTsKIAkJZ290byBmcmVlX25ldGRldjsKIAl9CmRpZmYgLS1naXQgYS9kcml2ZXJzL25l
dC9ldGhlcm5ldC94aWxpbngveGlsaW54X2VtYWNsaXRlLmMgYi9kcml2ZXJzL25ldC9ldGhlcm5l
dC94aWxpbngveGlsaW54X2VtYWNsaXRlLmMKaW5kZXggYjAzYTQxNy4uYjdjMDA1OCAxMDA2NDQK
LS0tIGEvZHJpdmVycy9uZXQvZXRoZXJuZXQveGlsaW54L3hpbGlueF9lbWFjbGl0ZS5jCisrKyBi
L2RyaXZlcnMvbmV0L2V0aGVybmV0L3hpbGlueC94aWxpbnhfZW1hY2xpdGUuYwpAQCAtMTE0Myw3
ICsxMTQzLDcgQEAgc3RhdGljIGludCB4ZW1hY2xpdGVfb2ZfcHJvYmUoc3RydWN0IHBsYXRmb3Jt
X2RldmljZSAqb2ZkZXYpCiAJbHAtPnJ4X3BpbmdfcG9uZyA9IGdldF9ib29sKG9mZGV2LCAieGxu
eCxyeC1waW5nLXBvbmciKTsKIAltYWNfYWRkcmVzcyA9IG9mX2dldF9tYWNfYWRkcmVzcyhvZmRl
di0+ZGV2Lm9mX25vZGUpOwogCi0JaWYgKG1hY19hZGRyZXNzKSB7CisJaWYgKCFJU19FUlJfT1Jf
TlVMTChtYWNfYWRkcmVzcykpIHsKIAkJLyogU2V0IHRoZSBNQUMgYWRkcmVzcy4gKi8KIAkJbWVt
Y3B5KG5kZXYtPmRldl9hZGRyLCBtYWNfYWRkcmVzcywgRVRIX0FMRU4pOwogCX0gZWxzZSB7CmRp
ZmYgLS1naXQgYS9uZXQvZXRoZXJuZXQvZXRoLmMgYi9uZXQvZXRoZXJuZXQvZXRoLmMKaW5kZXgg
ZjdhM2Q3YS4uYjhjMTI2YyAxMDA2NDQKLS0tIGEvbmV0L2V0aGVybmV0L2V0aC5jCisrKyBiL25l
dC9ldGhlcm5ldC9ldGguYwpAQCAtNTU0LDcgKzU1NCw3IEBAIGludCBldGhfcGxhdGZvcm1fZ2V0
X21hY19hZGRyZXNzKHN0cnVjdCBkZXZpY2UgKmRldiwgdTggKm1hY19hZGRyKQogCWFkZHIgPSBO
VUxMOwogCWlmIChkcCkKIAkJYWRkciA9IG9mX2dldF9tYWNfYWRkcmVzcyhkcCk7Ci0JaWYgKCFh
ZGRyKQorCWlmIChJU19FUlJfT1JfTlVMTChhZGRyKSkKIAkJYWRkciA9IGFyY2hfZ2V0X3BsYXRm
b3JtX21hY19hZGRyZXNzKCk7CiAKIAlpZiAoIWFkZHIpCi0tIAoxLjkuMQoKCl9fX19fX19fX19f
X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fCkxpbnV4LW1lZGlhdGVrIG1haWxp
bmcgbGlzdApMaW51eC1tZWRpYXRla0BsaXN0cy5pbmZyYWRlYWQub3JnCmh0dHA6Ly9saXN0cy5p
bmZyYWRlYWQub3JnL21haWxtYW4vbGlzdGluZm8vbGludXgtbWVkaWF0ZWsK
