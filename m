Return-Path: <linux-mediatek-bounces+lists+linux-mediatek=lfdr.de@lists.infradead.org>
X-Original-To: lists+linux-mediatek@lfdr.de
Delivered-To: lists+linux-mediatek@lfdr.de
Received: from bombadil.infradead.org (bombadil.infradead.org [IPv6:2607:7c80:54:e::133])
	by mail.lfdr.de (Postfix) with ESMTPS id 2556150F40
	for <lists+linux-mediatek@lfdr.de>; Mon, 24 Jun 2019 16:53:48 +0200 (CEST)
DKIM-Signature: v=1; a=rsa-sha256; q=dns/txt; c=relaxed/relaxed;
	d=lists.infradead.org; s=bombadil.20170209; h=Sender:
	Content-Transfer-Encoding:Content-Type:Cc:List-Subscribe:List-Help:List-Post:
	List-Archive:List-Unsubscribe:List-Id:MIME-Version:References:In-Reply-To:
	Message-Id:Date:Subject:To:From:Reply-To:Content-ID:Content-Description:
	Resent-Date:Resent-From:Resent-Sender:Resent-To:Resent-Cc:Resent-Message-ID:
	List-Owner; bh=lYC7hw4yV/SqGP7sccrkqtv3uLRO2alXYIeK9SdKiuY=; b=qlY1k9tuYgZXrr
	eAz4BsdpCeGFymbc7c94K+4B0HWka1NASn3qq+1vorxsE4xyyawDfAnA5Wg2HfDSfS3KMXbu3zY0L
	hWOLrKuFXPpSw292CthKWtZPAdFHUD1e4EllgSbNlDJl3zGf3sJ9YSFMelculm5iGD/K97uWJ8sN3
	sgKyNwxH7OmGsI8fOxJyT8oEvyFbkPU+YrxVaiWeqdCgGk9ILwIHDgpzec/eRqAHsg4xur1im70QF
	66dvSNj0PRL+dvdwEu61b+1CAQznhu6JC3DB4aZv5Gcu9vrZ/G+lGxO9a9zRsZZUaJaV+L1Vl2tb2
	hk7uaU/hIyTQRthb7lnw==;
Received: from localhost ([127.0.0.1] helo=bombadil.infradead.org)
	by bombadil.infradead.org with esmtp (Exim 4.92 #3 (Red Hat Linux))
	id 1hfQLm-0004nb-My; Mon, 24 Jun 2019 14:53:42 +0000
Received: from mx.0dd.nl ([5.2.79.48])
 by bombadil.infradead.org with esmtp (Exim 4.92 #3 (Red Hat Linux))
 id 1hfQLY-0004eA-QL
 for linux-mediatek@lists.infradead.org; Mon, 24 Jun 2019 14:53:31 +0000
Received: from mail.vdorst.com (mail.vdorst.com [IPv6:fd01::250])
 (using TLSv1.2 with cipher ECDHE-RSA-AES256-GCM-SHA384 (256/256 bits))
 (No client certificate requested)
 by mx.0dd.nl (Postfix) with ESMTPS id 2F1965FEAA;
 Mon, 24 Jun 2019 16:53:28 +0200 (CEST)
Authentication-Results: mx.0dd.nl;
 dkim=pass (2048-bit key) header.d=vdorst.com header.i=@vdorst.com
 header.b="ap3bsTdE"; dkim-atps=neutral
Received: from pc-rene.vdorst.com (pc-rene.vdorst.com [192.168.2.125])
 by mail.vdorst.com (Postfix) with ESMTPA id ED9D11CC6F19;
 Mon, 24 Jun 2019 16:53:27 +0200 (CEST)
DKIM-Filter: OpenDKIM Filter v2.11.0 mail.vdorst.com ED9D11CC6F19
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=vdorst.com;
 s=default; t=1561388008;
 bh=inaANzeGYZ3EgYB3duDullrdCzEiKUVwyGOseNfS7s0=;
 h=From:To:Cc:Subject:Date:In-Reply-To:References:From;
 b=ap3bsTdEAExFgwd28a/2Ei5ujPioBtPz7GbITjiNFpvN8ANMKdeOyom6Lrl5H+qad
 IUXB7QwPwrmAQQd6WVMFQuWPA9GM4e0C8KqVbMdo2YE0K2fG4ghHlXh46kl1fg8WBG
 qrKcC9Cb0C4aD2/3nv7cV639hfQAQJwQdNFmNMa+RdDENL5eqV31SNp+O3HNNbjg+k
 xw10bNKteewYxO/PNAPwyLH0K4CBhdP5NbEJ+Oi4rUydphcHrCK3u451Vpv7blb5Ft
 qyEG1UMHMtXF2wN+6YC82zXvTYqiA7fos1/6pCm5oclbA6sSR0GX8C3aDm5KFTTBkn
 PF2y0axaSgNFg==
From: =?UTF-8?q?Ren=C3=A9=20van=20Dorst?= <opensource@vdorst.com>
To: sean.wang@mediatek.com, f.fainelli@gmail.com, linux@armlinux.org.uk,
 davem@davemloft.net, matthias.bgg@gmail.com, andrew@lunn.ch,
 vivien.didelot@gmail.com
Subject: [PATCH RFC net-next 3/5] net: dsa: mt7530: Add support for port 5
Date: Mon, 24 Jun 2019 16:52:49 +0200
Message-Id: <20190624145251.4849-4-opensource@vdorst.com>
X-Mailer: git-send-email 2.20.1
In-Reply-To: <20190624145251.4849-1-opensource@vdorst.com>
References: <20190624145251.4849-1-opensource@vdorst.com>
MIME-Version: 1.0
X-CRM114-Version: 20100106-BlameMichelson ( TRE 0.8.0 (BSD) ) MR-646709E3 
X-CRM114-CacheID: sfid-20190624_075329_162228_229A252F 
X-CRM114-Status: GOOD (  18.57  )
X-Spam-Score: -0.2 (/)
X-Spam-Report: SpamAssassin version 3.4.2 on bombadil.infradead.org summary:
 Content analysis details:   (-0.2 points)
 pts rule name              description
 ---- ---------------------- --------------------------------------------------
 -0.0 SPF_PASS               SPF: sender matches SPF record
 0.0 SPF_HELO_NONE          SPF: HELO does not publish an SPF Record
 0.1 DKIM_SIGNED            Message has a DKIM or DK signature, not necessarily
 valid
 -0.1 DKIM_VALID_AU          Message has a valid DKIM or DK signature from
 author's domain
 -0.1 DKIM_VALID_EF          Message has a valid DKIM or DK signature from
 envelope-from domain
 -0.1 DKIM_VALID Message has at least one valid DKIM or DK signature
X-BeenThere: linux-mediatek@lists.infradead.org
X-Mailman-Version: 2.1.29
Precedence: list
List-Id: <linux-mediatek.lists.infradead.org>
List-Unsubscribe: <http://lists.infradead.org/mailman/options/linux-mediatek>, 
 <mailto:linux-mediatek-request@lists.infradead.org?subject=unsubscribe>
List-Archive: <http://lists.infradead.org/pipermail/linux-mediatek/>
List-Post: <mailto:linux-mediatek@lists.infradead.org>
List-Help: <mailto:linux-mediatek-request@lists.infradead.org?subject=help>
List-Subscribe: <http://lists.infradead.org/mailman/listinfo/linux-mediatek>, 
 <mailto:linux-mediatek-request@lists.infradead.org?subject=subscribe>
Cc: =?UTF-8?q?Ren=C3=A9=20van=20Dorst?= <opensource@vdorst.com>,
 netdev@vger.kernel.org, linux-mediatek@lists.infradead.org,
 linux-mips@vger.kernel.org, frank-w@public-files.de
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Sender: "Linux-mediatek" <linux-mediatek-bounces@lists.infradead.org>
Errors-To: linux-mediatek-bounces+lists+linux-mediatek=lfdr.de@lists.infradead.org

QWRkaW5nIHN1cHBvcnQgZm9yIHBvcnQgNS4KClBvcnQgNSBjYSBtdXhlZC9pbnRlcmZhY2UgdG86
Ci0gaW50ZXJuYWwgNXRoIEdNQUMgb2YgdGhlIHN3aXRjaDsgY2FuIGJlIHVzZWQgYXMgMm5kIENQ
VSBwb3J0IG9yIGFzCiAgZXh0cmEgcG9ydCB3aXRoIGFuIGV4dGVybmFsIHBoeSBmb3IgYSA2dGgg
ZXRoZXJuZXQgcG9ydC4KLSBpbnRlcm5hbCBQSFkgb2YgcG9ydCAwIG9yIDQ7IFVzZWQgaW4gbW9z
dCBhcHBsaWNhdGlvbnMgc28gdGhhdCBwb3J0IDAKICBvciA0IGlzIHRoZSBXQU4gcG9ydCBhbmQg
aW50ZXJmYWNlcyB3aXRoIHRoZSAybmQgR01BQyBvZiB0aGUgU09DLgoKU2lnbmVkLW9mZi1ieTog
UmVuw6kgdmFuIERvcnN0IDxvcGVuc291cmNlQHZkb3JzdC5jb20+Ci0tLQogZHJpdmVycy9uZXQv
ZHNhL210NzUzMC5jIHwgMTM1ICsrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKyst
LQogZHJpdmVycy9uZXQvZHNhL210NzUzMC5oIHwgIDI4ICsrKysrKysrCiAyIGZpbGVzIGNoYW5n
ZWQsIDE1OSBpbnNlcnRpb25zKCspLCA0IGRlbGV0aW9ucygtKQoKZGlmZiAtLWdpdCBhL2RyaXZl
cnMvbmV0L2RzYS9tdDc1MzAuYyBiL2RyaXZlcnMvbmV0L2RzYS9tdDc1MzAuYwppbmRleCA5YzVl
NGRkMDA4MjYuLjgzOGE5MjFjYTgzZSAxMDA2NDQKLS0tIGEvZHJpdmVycy9uZXQvZHNhL210NzUz
MC5jCisrKyBiL2RyaXZlcnMvbmV0L2RzYS9tdDc1MzAuYwpAQCAtNjMzLDYgKzYzMyw3NCBAQCBt
dDc1MzBfZ2V0X3NzZXRfY291bnQoc3RydWN0IGRzYV9zd2l0Y2ggKmRzLCBpbnQgcG9ydCwgaW50
IHNzZXQpCiAJcmV0dXJuIEFSUkFZX1NJWkUobXQ3NTMwX21pYik7CiB9CiAKK3N0YXRpYyB2b2lk
IG10NzUzMF9zZXR1cF9wb3J0NShzdHJ1Y3QgZHNhX3N3aXRjaCAqZHMsIHBoeV9pbnRlcmZhY2Vf
dCBpbnRlcmZhY2UpCit7CisJc3RydWN0IG10NzUzMF9wcml2ICpwcml2ID0gZHMtPnByaXY7CisJ
dTggdHhfZGVsYXkgPSAwOworCWludCB2YWw7CisKKwltdXRleF9sb2NrKCZwcml2LT5yZWdfbXV0
ZXgpOworCisJdmFsID0gbXQ3NTMwX3JlYWQocHJpdiwgTVQ3NTMwX01IV1RSQVApOworCisJdmFs
IHw9IE1IV1RSQVBfTUFOVUFMIHwgTUhXVFJBUF9QNV9NQUNfU0VMIHwgTUhXVFJBUF9QNV9ESVM7
CisJdmFsICY9IH5NSFdUUkFQX1A1X1JHTUlJX01PREUgJiB+TUhXVFJBUF9QSFkwX1NFTDsKKwor
CXN3aXRjaCAocHJpdi0+cDVfbW9kZSkgeworCWNhc2UgUDVfTU9ERV9HUEhZX1AwOgorCQkvKiBN
VDc1MzBfUDVfTU9ERV9HUEhZX1AwOiAybmQgR01BQyAtPiBQNSAtPiBQMCAqLworCQl2YWwgfD0g
TUhXVFJBUF9QSFkwX1NFTDsKKwkJLyogZmFsbCB0aHJvdWdoICovCisJY2FzZSBQNV9NT0RFX0dQ
SFlfUDQ6CisJCS8qIE1UNzUzMF9QNV9NT0RFX0dQSFlfUDQ6IDJuZCBHTUFDIC0+IFA1IC0+IFA0
ICovCisJCXZhbCAmPSB+TUhXVFJBUF9QNV9NQUNfU0VMICYgfk1IV1RSQVBfUDVfRElTOworCisJ
CS8qIFNldHVwIHRoZSBNQUMgYnkgZGVmYXVsdCBmb3IgdGhlIGNwdSBwb3J0ICovCisJCW10NzUz
MF93cml0ZShwcml2LCBNVDc1MzBfUE1DUl9QKDUpLCAweDU2MzAwKTsKKwkJYnJlYWs7CisJY2Fz
ZSBQNV9NT0RFX0dNQUM6CisJCS8qIE1UNzUzMF9QNV9NT0RFX0dNQUM6IFA1IC0+IEV4dGVybmFs
IHBoeSBvciAybmQgR01BQyAqLworCQl2YWwgJj0gfk1IV1RSQVBfUDVfRElTOworCQlicmVhazsK
KwljYXNlIFA1X01PREVfRElTQUJMRUQ6CisJCWludGVyZmFjZSA9IFBIWV9JTlRFUkZBQ0VfTU9E
RV9OQTsKKwkJYnJlYWs7CisJZGVmYXVsdDoKKwkJZGV2X2Vycihkcy0+ZGV2LCAiVW5zdXBwb3J0
ZWQgcDVfbW9kZSAlZFxuIiwgcHJpdi0+cDVfbW9kZSk7CisJCWdvdG8gdW5sb2NrX2V4aXQ7CisJ
fQorCisJLyogU2V0dXAgUkdNSUkgc2V0dGluZ3MgKi8KKwlpZiAocGh5X2ludGVyZmFjZV9tb2Rl
X2lzX3JnbWlpKGludGVyZmFjZSkpIHsKKwkJdmFsIHw9IE1IV1RSQVBfUDVfUkdNSUlfTU9ERTsK
KworCQkvKiBQNSBSR01JSSBSWCBDbG9jayBDb250cm9sOiBkZWxheSBzZXR0aW5nIGZvciAxMDAw
TSAqLworCQltdDc1MzBfd3JpdGUocHJpdiwgTVQ3NTMwX1A1UkdNSUlSWENSLCBDU1JfUkdNSUlf
RURHRV9BTElHTik7CisKKwkJLyogRG9uJ3Qgc2V0IGRlbGF5IGluIERTQSBtb2RlICovCisJCWlm
ICghZHNhX2lzX2RzYV9wb3J0KHByaXYtPmRzLCA1KSAmJgorCQkgICAgKGludGVyZmFjZSA9PSBQ
SFlfSU5URVJGQUNFX01PREVfUkdNSUlfVFhJRCB8fAorCQkgICAgaW50ZXJmYWNlID09IFBIWV9J
TlRFUkZBQ0VfTU9ERV9SR01JSV9JRCkpCisJCQl0eF9kZWxheSA9IDQ7IC8qIG4gKiAwLjUgbnMg
Ki8KKworCQkvKiBQNSBSR01JSSBUWCBDbG9jayBDb250cm9sOiBkZWxheSB4ICovCisJCW10NzUz
MF93cml0ZShwcml2LCBNVDc1MzBfUDVSR01JSVRYQ1IsCisJCQkgICAgIENTUl9SR01JSV9UWENf
Q0ZHKDB4MTAgKyB0eF9kZWxheSkpOworCisJCS8qIHJlZHVjZSBQNSBSR01JSSBUeCBkcml2aW5n
LCA4bUEgKi8KKwkJbXQ3NTMwX3dyaXRlKHByaXYsIE1UNzUzMF9JT19EUlZfQ1IsCisJCQkgICAg
IFA1X0lPX0NMS19EUlYoMSkgfCBQNV9JT19EQVRBX0RSVigxKSk7CisJfQorCisJbXQ3NTMwX3dy
aXRlKHByaXYsIE1UNzUzMF9NSFdUUkFQLCB2YWwpOworCisJZGV2X2luZm8oZHMtPmRldiwgIlNl
dHVwIFA1LCBIV1RSQVA9MHgleCwgcG9ydC1tb2RlPSVzLCBwaHktbW9kZT0lc1xuIiwKKwkJIHZh
bCwgcDVfbW9kZXMocHJpdi0+cDVfbW9kZSksIHBoeV9tb2RlcyhpbnRlcmZhY2UpKTsKKwordW5s
b2NrX2V4aXQ6CisJbXV0ZXhfdW5sb2NrKCZwcml2LT5yZWdfbXV0ZXgpOworfQorCiBzdGF0aWMg
aW50CiBtdDc1MzBfY3B1X3BvcnRfZW5hYmxlKHN0cnVjdCBtdDc1MzBfcHJpdiAqcHJpdiwKIAkJ
ICAgICAgIGludCBwb3J0KQpAQCAtMTE3Myw2ICsxMjQxLDEwIEBAIG10NzUzMF9zZXR1cChzdHJ1
Y3QgZHNhX3N3aXRjaCAqZHMpCiAJdTMyIGlkLCB2YWw7CiAJc3RydWN0IGRldmljZV9ub2RlICpk
bjsKIAlzdHJ1Y3QgbXQ3NTMwX2R1bW15X3BvbGwgcDsKKwlwaHlfaW50ZXJmYWNlX3QgaW50ZXJm
YWNlOworCXN0cnVjdCBkZXZpY2Vfbm9kZSAqbWFjX25wOworCXN0cnVjdCBkZXZpY2Vfbm9kZSAq
cGh5X25vZGU7CisJY29uc3QgX19iZTMyICpfaWQ7CiAKIAkvKiBUaGUgcGFyZW50IG5vZGUgb2Yg
bWFzdGVyIG5ldGRldiB3aGljaCBob2xkcyB0aGUgY29tbW9uIHN5c3RlbQogCSAqIGNvbnRyb2xs
ZXIgYWxzbyBpcyB0aGUgY29udGFpbmVyIGZvciB0d28gR01BQ3Mgbm9kZXMgcmVwcmVzZW50aW5n
CkBAIC0xMjU4LDYgKzEzMzAsNDAgQEAgbXQ3NTMwX3NldHVwKHN0cnVjdCBkc2Ffc3dpdGNoICpk
cykKIAkJCW10NzUzMF9wb3J0X2Rpc2FibGUoZHMsIGkpOwogCX0KIAorCS8qIFNldHVwIHBvcnQg
NSAqLworCXByaXYtPnA1X21vZGUgPSBQNV9NT0RFX0RJU0FCTEVEOworCWludGVyZmFjZSA9IFBI
WV9JTlRFUkZBQ0VfTU9ERV9OQTsKKworCWlmICghZHNhX2lzX3VudXNlZF9wb3J0KGRzLCA1KSkg
eworCQlwcml2LT5wNV9tb2RlID0gUDVfTU9ERV9HTUFDOworCQlpbnRlcmZhY2UgPSBvZl9nZXRf
cGh5X21vZGUoZHMtPnBvcnRzWzVdLmRuKTsKKwl9IGVsc2UgeworCQkvKiBTY2FuIHRoZSBldGhl
cm5ldCBub2Rlcy4gTG9vayBmb3IgR01BQzEsIExvb2t1cCB1c2VkIHBoeSAqLworCQlmb3JfZWFj
aF9jaGlsZF9vZl9ub2RlKGRuLCBtYWNfbnApIHsKKwkJCWlmICghb2ZfZGV2aWNlX2lzX2NvbXBh
dGlibGUobWFjX25wLAorCQkJCQkJICAgICAibWVkaWF0ZWssZXRoLW1hYyIpKQorCQkJCWNvbnRp
bnVlOworCQkJX2lkID0gb2ZfZ2V0X3Byb3BlcnR5KG1hY19ucCwgInJlZyIsIE5VTEwpOworCQkJ
aWYgKGJlMzJfdG9fY3B1cChfaWQpICAhPSAxKQorCQkJCWNvbnRpbnVlOworCisJCQlpbnRlcmZh
Y2UgPSBvZl9nZXRfcGh5X21vZGUobWFjX25wKTsKKwkJCXBoeV9ub2RlID0gb2ZfcGFyc2VfcGhh
bmRsZShtYWNfbnAsICJwaHktaGFuZGxlIiwgMCk7CisKKwkJCWlmIChwaHlfbm9kZS0+cGFyZW50
ID09IHByaXYtPmRldi0+b2Zfbm9kZS0+cGFyZW50KSB7CisJCQkJX2lkID0gb2ZfZ2V0X3Byb3Bl
cnR5KHBoeV9ub2RlLCAicmVnIiwgTlVMTCk7CisJCQkJaWQgPSBiZTMyX3RvX2NwdXAoX2lkKTsK
KwkJCQlpZiAoaWQgPT0gMCkKKwkJCQkJcHJpdi0+cDVfbW9kZSA9IFA1X01PREVfR1BIWV9QMDsK
KwkJCQlpZiAoaWQgPT0gNCkKKwkJCQkJcHJpdi0+cDVfbW9kZSA9IFA1X01PREVfR1BIWV9QNDsK
KwkJCX0KKwkJCWJyZWFrOworCQl9CisJfQorCisJbXQ3NTMwX3NldHVwX3BvcnQ1KGRzLCBpbnRl
cmZhY2UpOworCiAJLyogRmx1c2ggdGhlIEZEQiB0YWJsZSAqLwogCXJldCA9IG10NzUzMF9mZGJf
Y21kKHByaXYsIE1UNzUzMF9GREJfRkxVU0gsIE5VTEwpOwogCWlmIChyZXQgPCAwKQpAQCAtMTI4
Myw3ICsxMzg5LDIwIEBAIHN0YXRpYyB2b2lkIG10NzUzMF9waHlsaW5rX21hY19jb25maWcoc3Ry
dWN0IGRzYV9zd2l0Y2ggKmRzLCBpbnQgcG9ydCwKIAkJaWYgKHN0YXRlLT5pbnRlcmZhY2UgIT0g
UEhZX0lOVEVSRkFDRV9NT0RFX0dNSUkpCiAJCQlnb3RvIHVuc3VwcG9ydGVkOwogCQlicmVhazsK
LQkvKiBjYXNlIDU6IFBvcnQgNSBpcyBub3Qgc3VwcG9ydGVkISAqLworCWNhc2UgNTogLyogMm5k
IGNwdSBwb3J0IHdpdGggcGh5IG9mIHBvcnQgMCBvciA0IC8gZXh0ZXJuYWwgcGh5ICovCisJCWlm
ICghcGh5X2ludGVyZmFjZV9tb2RlX2lzX3JnbWlpKHN0YXRlLT5pbnRlcmZhY2UpICYmCisJCSAg
ICBzdGF0ZS0+aW50ZXJmYWNlICE9IFBIWV9JTlRFUkZBQ0VfTU9ERV9NSUkpCisJCQlnb3RvIHVu
c3VwcG9ydGVkOworCQlpZiAocHJpdi0+cDVfbW9kZSAhPSBQNV9NT0RFX0dNQUMpIHsKKwkJCXBy
aXYtPnA1X21vZGUgPSBQNV9NT0RFX0dNQUM7CisJCQltdDc1MzBfcG9ydF9kaXNhYmxlKGRzLCBw
b3J0KTsKKwkJCW10NzUzMF9zZXR1cF9wb3J0NShkcywgc3RhdGUtPmludGVyZmFjZSk7CisJCQlt
dDc1MzBfcG9ydF9lbmFibGUoZHMsIHBvcnQsIE5VTEwpOworCQl9CisJCS8qIFdlIGFyZSBjb25u
ZWN0ZWQgdG8gZXh0ZXJuYWwgcGh5ICovCisJCWlmIChkc2FfaXNfdXNlcl9wb3J0KGRzLCA1KSkK
KwkJCW1jciB8PSBQTUNSX0VYVF9QSFk7CisJCWJyZWFrOwogCWNhc2UgNjogLyogMXN0IGNwdSBw
b3J0ICovCiAJCWlmIChzdGF0ZS0+aW50ZXJmYWNlICE9IFBIWV9JTlRFUkZBQ0VfTU9ERV9SR01J
SSAmJgogCQkgICAgc3RhdGUtPmludGVyZmFjZSAhPSBQSFlfSU5URVJGQUNFX01PREVfVFJHTUlJ
KQpAQCAtMTM2NCw3ICsxNDgzLDEyIEBAIHN0YXRpYyB2b2lkIG10NzUzMF9waHlsaW5rX3ZhbGlk
YXRlKHN0cnVjdCBkc2Ffc3dpdGNoICpkcywgaW50IHBvcnQsCiAJCSAgICBzdGF0ZS0+aW50ZXJm
YWNlICE9IFBIWV9JTlRFUkZBQ0VfTU9ERV9HTUlJKQogCQkJZ290byB1bnN1cHBvcnRlZDsKIAkJ
YnJlYWs7Ci0JLyogY2FzZSA1OiBQb3J0IDUgbm90IHN1cHBvcnRlZCEgKi8KKwljYXNlIDU6IC8q
IDJuZCBjcHUgcG9ydCB3aXRoIHBoeSBvZiBwb3J0IDAgb3IgNCAvIGV4dGVybmFsIHBoeSAqLwor
CQlpZiAoIXBoeV9pbnRlcmZhY2VfbW9kZV9pc19yZ21paShzdGF0ZS0+aW50ZXJmYWNlKSAmJgor
CQkgICAgc3RhdGUtPmludGVyZmFjZSAhPSBQSFlfSU5URVJGQUNFX01PREVfTUlJICYmCisJCSAg
ICBzdGF0ZS0+aW50ZXJmYWNlICE9IFBIWV9JTlRFUkZBQ0VfTU9ERV9OQSkKKwkJCWdvdG8gdW5z
dXBwb3J0ZWQ7CisJCWJyZWFrOwogCWNhc2UgNjogLyogMXN0IGNwdSBwb3J0ICovCiAJCWlmIChz
dGF0ZS0+aW50ZXJmYWNlICE9IFBIWV9JTlRFUkZBQ0VfTU9ERV9SR01JSSAmJgogCQkgICAgc3Rh
dGUtPmludGVyZmFjZSAhPSBQSFlfSU5URVJGQUNFX01PREVfVFJHTUlJKQpAQCAtMTM4NSw4ICsx
NTA5LDExIEBAIHN0YXRpYyB2b2lkIG10NzUzMF9waHlsaW5rX3ZhbGlkYXRlKHN0cnVjdCBkc2Ff
c3dpdGNoICpkcywgaW50IHBvcnQsCiAJcGh5bGlua19zZXQobWFzaywgMTBiYXNlVF9GdWxsKTsK
IAlwaHlsaW5rX3NldChtYXNrLCAxMDBiYXNlVF9IYWxmKTsKIAlwaHlsaW5rX3NldChtYXNrLCAx
MDBiYXNlVF9GdWxsKTsKLQlwaHlsaW5rX3NldChtYXNrLCAxMDAwYmFzZVRfRnVsbCk7Ci0JcGh5
bGlua19zZXQobWFzaywgMTAwMGJhc2VUX0hhbGYpOworCisJaWYgKHN0YXRlLT5pbnRlcmZhY2Ug
IT0gUEhZX0lOVEVSRkFDRV9NT0RFX01JSSkgeworCQlwaHlsaW5rX3NldChtYXNrLCAxMDAwYmFz
ZVRfRnVsbCk7CisJCXBoeWxpbmtfc2V0KG1hc2ssIDEwMDBiYXNlVF9IYWxmKTsKKwl9CiAKIAls
aW5rbW9kZV9hbmQoc3VwcG9ydGVkLCBzdXBwb3J0ZWQsIG1hc2spOwogCWxpbmttb2RlX2FuZChz
dGF0ZS0+YWR2ZXJ0aXNpbmcsIHN0YXRlLT5hZHZlcnRpc2luZywgbWFzayk7CmRpZmYgLS1naXQg
YS9kcml2ZXJzL25ldC9kc2EvbXQ3NTMwLmggYi9kcml2ZXJzL25ldC9kc2EvbXQ3NTMwLmgKaW5k
ZXggNDFkOWExMzJhYzcwLi5mMmE4NGVmNDg1NDggMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvbmV0L2Rz
YS9tdDc1MzAuaAorKysgYi9kcml2ZXJzL25ldC9kc2EvbXQ3NTMwLmgKQEAgLTE4Niw2ICsxODYs
NyBAQCBlbnVtIG10NzUzMF92bGFuX3BvcnRfYXR0ciB7CiAvKiBSZWdpc3RlciBmb3IgcG9ydCBN
QUMgY29udHJvbCByZWdpc3RlciAqLwogI2RlZmluZSBNVDc1MzBfUE1DUl9QKHgpCQkoMHgzMDAw
ICsgKCh4KSAqIDB4MTAwKSkKICNkZWZpbmUgIFBNQ1JfSUZHX1hNSVQoeCkJCSgoKHgpICYgMHgz
KSA8PCAxOCkKKyNkZWZpbmUgIFBNQ1JfRVhUX1BIWQkJCUJJVCgxNykKICNkZWZpbmUgIFBNQ1Jf
TUFDX01PREUJCQlCSVQoMTYpCiAjZGVmaW5lICBQTUNSX0ZPUkNFX01PREUJCUJJVCgxNSkKICNk
ZWZpbmUgIFBNQ1JfVFhfRU4JCQlCSVQoMTQpCkBAIC0yNjAsNiArMjYxLDcgQEAgZW51bSBtdDc1
MzBfdmxhbl9wb3J0X2F0dHIgewogCiAvKiBSZWdpc3RlciBmb3IgaHcgdHJhcCBtb2RpZmljYXRp
b24gKi8KICNkZWZpbmUgTVQ3NTMwX01IV1RSQVAJCQkweDc4MDQKKyNkZWZpbmUgIE1IV1RSQVBf
UEhZMF9TRUwJCUJJVCgyMCkKICNkZWZpbmUgIE1IV1RSQVBfTUFOVUFMCQkJQklUKDE2KQogI2Rl
ZmluZSAgTUhXVFJBUF9QNV9NQUNfU0VMCQlCSVQoMTMpCiAjZGVmaW5lICBNSFdUUkFQX1A2X0RJ
UwkJCUJJVCg4KQpAQCAtNDE3LDYgKzQxOSwzMCBAQCBzdHJ1Y3QgbXQ3NTMwX3BvcnQgewogCXUx
NiBwdmlkOwogfTsKIAorLyogUG9ydCA1IE1vZGUgZGVmaW5pdGlvbnMgKi8KK2VudW0gcDVfbW9k
ZSB7CisJUDVfTU9ERV9ESVNBQkxFRCA9IDAsCisJUDVfTU9ERV9HUEhZX1AwLAorCVA1X01PREVf
R1BIWV9QNCwKKwlQNV9NT0RFX0dNQUMsCit9OworCitzdGF0aWMgY29uc3QgY2hhciAqcDVfbW9k
ZXModW5zaWduZWQgaW50IHA1X21vZGUpCit7CisJc3dpdGNoIChwNV9tb2RlKSB7CisJY2FzZSBQ
NV9NT0RFX0RJU0FCTEVEOgorCQlyZXR1cm4gIkRJU0FCTEVEIjsKKwljYXNlIFA1X01PREVfR1BI
WV9QMDoKKwkJcmV0dXJuICJQSFkgUDAiOworCWNhc2UgUDVfTU9ERV9HUEhZX1A0OgorCQlyZXR1
cm4gIlBIWSBQNCI7CisJY2FzZSBQNV9NT0RFX0dNQUM6CisJCXJldHVybiAiR01BQyI7CisJZGVm
YXVsdDoKKwkJcmV0dXJuICJ1bmtub3duIjsKKwl9Cit9CisKIC8qIHN0cnVjdCBtdDc1MzBfcHJp
diAtCVRoaXMgaXMgdGhlIG1haW4gZGF0YSBzdHJ1Y3R1cmUgZm9yIGhvbGRpbmcgdGhlIHN0YXRl
CiAgKgkJCW9mIHRoZSBkcml2ZXIKICAqIEBkZXY6CQlUaGUgZGV2aWNlIHBvaW50ZXIKQEAgLTQz
Miw2ICs0NTgsNyBAQCBzdHJ1Y3QgbXQ3NTMwX3BvcnQgewogICogQHBvcnRzOgkJSG9sZGluZyB0
aGUgc3RhdGUgYW1vbmcgcG9ydHMKICAqIEByZWdfbXV0ZXg6CQlUaGUgbG9jayBmb3IgcHJvdGVj
dGluZyBhbW9uZyBwcm9jZXNzIGFjY2Vzc2luZwogICoJCQlyZWdpc3RlcnMKKyAqIEBwNV9tb2Rl
OgkJUE9SVCA1IG1vZGUgc3RhdHVzCiAgKi8KIHN0cnVjdCBtdDc1MzBfcHJpdiB7CiAJc3RydWN0
IGRldmljZQkJKmRldjsKQEAgLTQ0NCw2ICs0NzEsNyBAQCBzdHJ1Y3QgbXQ3NTMwX3ByaXYgewog
CXN0cnVjdCBncGlvX2Rlc2MJKnJlc2V0OwogCXVuc2lnbmVkIGludAkJaWQ7CiAJYm9vbAkJCW1j
bTsKKwl1bnNpZ25lZCBpbnQJCXA1X21vZGU7CiAKIAlzdHJ1Y3QgbXQ3NTMwX3BvcnQJcG9ydHNb
TVQ3NTMwX05VTV9QT1JUU107CiAJLyogcHJvdGVjdCBhbW9uZyBwcm9jZXNzZXMgZm9yIHJlZ2lz
dGVycyBhY2Nlc3MqLwotLSAKMi4yMC4xCgoKX19fX19fX19fX19fX19fX19fX19fX19fX19fX19f
X19fX19fX19fX19fX19fX18KTGludXgtbWVkaWF0ZWsgbWFpbGluZyBsaXN0CkxpbnV4LW1lZGlh
dGVrQGxpc3RzLmluZnJhZGVhZC5vcmcKaHR0cDovL2xpc3RzLmluZnJhZGVhZC5vcmcvbWFpbG1h
bi9saXN0aW5mby9saW51eC1tZWRpYXRlawo=
